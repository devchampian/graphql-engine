<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-graphql/core/actions/action-handlers">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Hasura GraphQL Docs" href="/graphql-engine/opensearch.xml">
<link rel="preconnect" href="https://cdn.segment.com">
<script>!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),e._loadOptions=n},e._writeKey="RQXoHRpNcmBKllUDihjDjupGv4AHn5TB",e.SNIPPET_VERSION="4.15.3",e.load("RQXoHRpNcmBKllUDihjDjupGv4AHn5TB"),e.page()}}()</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PF5MQ2Z",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><title data-rh="true">Action handlers | Hasura GraphQL Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://graphql-engine-cdn.hasura.io/assets/hge-docs/og-image.png"><meta data-rh="true" name="twitter:image" content="https://graphql-engine-cdn.hasura.io/assets/hge-docs/og-image.png"><meta data-rh="true" property="og:url" content="https://hasura.io/graphql-engine/latest/graphql/core/actions/action-handlers/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Action handlers | Hasura GraphQL Docs"><meta data-rh="true" name="description" content="Action handlers for Hasura actions"><meta data-rh="true" property="og:description" content="Action handlers for Hasura actions"><meta data-rh="true" name="keywords" content="hasura,docs,actions,handlers"><link data-rh="true" rel="icon" href="/graphql-engine/docs/img/favicon.png"><link data-rh="true" rel="canonical" href="https://hasura.io/graphql-engine/latest/graphql/core/actions/action-handlers/"><link data-rh="true" rel="alternate" href="https://hasura.io/graphql-engine/latest/graphql/core/actions/action-handlers/" hreflang="en"><link data-rh="true" rel="alternate" href="https://hasura.io/graphql-engine/latest/graphql/core/actions/action-handlers/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://NS6GBGYACO-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/graphql-engine/assets/css/styles.b0e6885a.css">
<link rel="preload" href="/graphql-engine/assets/js/runtime~main.386831d7.js" as="script">
<link rel="preload" href="/graphql-engine/assets/js/main.9f72c775.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PF5MQ2Z" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://hasura.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/graphql-engine/img/logo.svg" alt="Hasura Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/graphql-engine/img/logo-light.svg" alt="Hasura Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link navbar__link--active" href="/graphql-engine/latest/graphql/core/index/">Hasura GraphQL Engine</a></li><li><a class="dropdown__link" href="/graphql-engine/latest/graphql/cloud/index/">Hasura Cloud</a></li></ul></div><a href="https://hasura.io/products/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Product</a><a href="https://hasura.io/blog/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://hasura.io/learn/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Tutorials</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/graphql-engine/latest/graphql/core/index/">v2.x</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/graphql-engine/latest/graphql/core/actions/action-handlers/">v2.x</a></li><li><a href="https://hasura.io/docs/1.0/graphql/core/index.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">v1.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="searchBox_Gz_y"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://github.com/hasura/graphql-engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://hasura.io/pricing/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Pricing</a><a href="https://cloud.hasura.io/login?pg=docs&amp;plcmt=header&amp;cta=log-in&amp;tech=default" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link nav-link_login">Login</a><a href="https://cloud.hasura.io/signup?pg=products&amp;plcmt=header&amp;cta=try-hasura&amp;tech=default" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link nav-link_getting-started">Get Started</a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><div class="doc-sidebar-tabs_JhYs"><a class="link-tab_uGaM" href="/graphql-engine/latest/graphql/core/index/">Hasura Core</a><a class="link-tab_uGaM" href="/graphql-engine/latest/graphql/cloud/index/">Hasura Cloud</a></div><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/graphql-engine/latest/graphql/core/index/">Hasura GraphQL Engine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/index/">Index</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/getting-started/index/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/databases/index/">Databases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Databases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/index/">Actions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Actions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/create/">Creating actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/types/index/">Custom types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/action-handlers/">Action handlers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/async-actions/">Async actions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/codegen/index/">Codegen</a><button aria-label="Toggle the collapsible sidebar category &#x27;Codegen&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/derive/">Deriving actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/action-permissions/">Actions permissions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/action-relationships/">Actions relationships</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/rest-connectors/">REST Connectors for actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/debugging/">Debugging actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/actions/logs-clean-up/">Cleaning up async action logs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/remote-schemas/index/">Remote Schemas</a><button aria-label="Toggle the collapsible sidebar category &#x27;Remote Schemas&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/event-triggers/index/">Event Triggers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Event Triggers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/scheduled-triggers/index/">Scheduled Triggers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scheduled Triggers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/auth/index/">Authentication &amp; Authorization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication &amp; Authorization&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/migrations/index/">Migrations &amp; Metadata (CI/CD)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Migrations &amp; Metadata (CI/CD)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/deployment/index/">Deploying</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deploying&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/hasura-cli/index/">Hasura CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hasura CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/api-reference/index/">API Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;API Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/how-it-works/index/">How It Works</a><button aria-label="Toggle the collapsible sidebar category &#x27;How It Works&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/troubleshooting/index/">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/faq/index/">FAQs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/graphql-engine/latest/graphql/core/guides/index/">Guides / Tutorials / Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides / Tutorials / Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-engine/latest/graphql/core/security-disclosure/index/">Security Vulnerability Protocol</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="custom_doc_item_wrapper custom_doc_item_wrapper_SmwM"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/graphql-engine/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Hasura GraphQL Engine</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/graphql-engine/latest/graphql/core/actions/index/"><span itemprop="name">Actions</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Action handlers</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v2.x</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Action handlers</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>Actions need to be backed by custom business logic. This business logic
can be defined in a handler which is an HTTP webhook.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="http-handler">HTTP handler<a class="hash-link" href="#http-handler" title="Direct link to heading">​</a></h2><p>When the action is executed i.e. when the query or the mutation is
called, Hasura makes a <code>POST</code> request to the handler with the action
arguments and the session variables.</p><p>The request payload is of the format:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;action&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;action-name&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;input&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;arg1&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;value&gt;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;arg2&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;value&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;session_variables&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;x-hasura-user-id&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;session-user-id&gt;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;x-hasura-role&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;session-user-role&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;request_query&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;request-query&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>All <code>session_variables</code> in the request payload have lowercase keys.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="returning-a-success-response">Returning a success response<a class="hash-link" href="#returning-a-success-response" title="Direct link to heading">​</a></h2><p>To return a success response, you must send back a response payload of
action&#x27;s response type. The HTTP status code must be <code>2xx</code> for a
successful response.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="returning-an-error-response">Returning an error response<a class="hash-link" href="#returning-an-error-response" title="Direct link to heading">​</a></h2><p>To return an error response, you must send back an error object. An
error object looks like:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;mandatory-error-message&gt;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;extensions&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;optional-json-object&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>where <code>extensions</code> is an optional JSON value.</p><p>If present, <code>extensions</code> should be a JSON object, which may have a
status code field <code>code</code>, along with other data you may want to add to
your errors:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;optional-error-code&gt;&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;optionalField1&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;&lt;custom-data-here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The HTTP status code must be <code>4xx</code> in order to indicate an error
response.</p><p>For backwards compatibility with previous versions of Hasura, the <code>code</code>
field may also be supplied at the root of the error object, i.e. at
<code>$.code</code>. This will be deprecated in a future release, and providing
<code>code</code> within <code>extensions</code> is preferred.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="example">Example<a class="hash-link" href="#example" title="Direct link to heading">​</a></h2><p>For example, consider the following mutation.</p><div class="codeBlockContainer_I0IT language-graphql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-graphql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">extend</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">Mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 0, 0)">UserLogin</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token attr-name" style="color:rgb(255, 0, 0)">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 0, 0)">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserInfo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">type</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(38, 127, 153)">UserInfo</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 0, 0)">accessToken</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token attr-name" style="color:rgb(255, 0, 0)">userId</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token scalar">Int</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Let&#x27;s say, the following mutation is executed:</p><div class="codeBlockContainer_I0IT language-graphql theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-graphql codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">mutation</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property-query property-mutation">UserLogin</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token attr-name" style="color:rgb(255, 0, 0)">username</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;jake&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 0, 0)">password</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;secretpassword&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">accessToken</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">userId</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Hasura will call the handler with the following payload:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;action&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;UserLogin&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;input&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;username&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;jake&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;password&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;secretpassword&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;session_variables&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;x-hasura-user-id&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;423&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;x-hasura-role&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;request_query&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;mutation {\n  UserLogin (username: \&quot;jake\&quot;, password: \&quot;secretpassword\&quot;) {\n    accessToken\n    userId\n  }\n}\n&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>To return a success response, you must send the response of the action&#x27;s
output type (in this case, <code>UserInfo</code>) with a status code <code>2xx</code>. So a
sample response would be:</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;accessToken&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVC&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;userId&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">423</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>To throw an error, you must send a response of the following type while
setting the status code as <code>4xx</code>.</p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token property">&quot;message&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;invalid credentials&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="securing-action-handlers">Restrict access to your action handler<a class="hash-link" href="#securing-action-handlers" title="Direct link to heading">​</a></h2><p>You might want to restrict access to your action handler in order to
ensure that it can only get called by your Hasura instance and not by
third parties.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-an-action-secret">Adding an action secret<a class="hash-link" href="#adding-an-action-secret" title="Direct link to heading">​</a></h3><p>One possible way of restricting access to an action handler is by adding
a header to the action that is automatically sent with each request to
the webhook, and then adding a check against that in your action
handler.</p><ul><li><a href="/graphql-engine/latest/graphql/core/actions/action-handlers/#configure-your-hasura-instance">Step 1: Configure your Hasura instance</a></li><li><a href="/graphql-engine/latest/graphql/core/actions/action-handlers/#add-a-header-to-your-action">Step 2: Add a header to your action</a></li><li><a href="/graphql-engine/latest/graphql/core/actions/action-handlers/#verify-the-secret-in-your-action-handler">Step 3: Verify the secret in your action handler</a></li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>Adding an action secret is a simple way of restricting access to an
action handler and will suffice in most use cases. However, if you have
more profound security requirements, you might want to choose advanced
security solutions tailored to your needs.</p></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="configure-your-hasura-instance">Step 1: Configure your Hasura instance<a class="hash-link" href="#configure-your-hasura-instance" title="Direct link to heading">​</a></h4><p>In your Hasura server, add the action secret as an environment variable,
say <code>ACTION_SECRET_ENV</code>.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="add-a-header-to-your-action">Step 2: Add a header to your action<a class="hash-link" href="#add-a-header-to-your-action" title="Direct link to heading">​</a></h4><p>For your action, add a header that will act as an action secret.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs api-tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">Console</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">CLI</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">API</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>Head to the <code>Actions -&gt; [action-name]</code> tab in the console and scroll
down to <code>Headers</code>. You can now configure an action secret by adding a
header:</p><div><img src="data:image/png;base64,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" alt="Console action secret" width="700px" class="main-img_varT"></div><p>Then hit <code>Save</code>.</p></div><div role="tabpanel" hidden=""><p>Go to <code>metadata/actions.yaml</code> in the Hasura project directory.</p><p>Update the definition of your action by adding the action secret as a
header:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> actions</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> actionName</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token key atrule">definition</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> synchronous</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token key atrule">handler</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token number" style="color:rgb(9, 134, 88)">3000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">       </span><span class="token key atrule">forward_client_headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token plain">       </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(4, 81, 165)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ACTION_SECRET</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token plain">           </span><span class="token key atrule">value_from_env</span><span class="token punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token plain"> ACTION_SECRET_ENV</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Save the changes and run <code>hasura metadata apply</code> to set the headers.</p></div><div role="tabpanel" hidden=""><p>Headers can be set when <a href="/graphql-engine/latest/graphql/core/api-reference/metadata-api/actions/#metadata-create-action">creating</a> or
<a href="/graphql-engine/latest/graphql/core/api-reference/metadata-api/actions/#metadata-update-action">updating</a> an action via the metadata API.</p><div class="codeBlockContainer_I0IT language-http theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-http codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token request-line method property">POST</span><span class="token request-line"> </span><span class="token request-line request-target url">/v1/metadata</span><span class="token request-line"> </span><span class="token request-line http-version property">HTTP/1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token header header-name keyword" style="color:rgb(0, 0, 255)">Content-Type</span><span class="token header punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token header"> </span><span class="token header header-value">application/json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token header header-name keyword" style="color:rgb(0, 0, 255)">X-Hasura-Role</span><span class="token header punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token header"> </span><span class="token header header-value">admin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json"></span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">  </span><span class="token application-json property">&quot;type&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;create_action&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">  </span><span class="token application-json property">&quot;args&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">    </span><span class="token application-json property">&quot;name&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;addNumbers&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">    </span><span class="token application-json property">&quot;definition&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;kind&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;synchronous&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;type&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;query&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;headers&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">          </span><span class="token application-json property">&quot;name&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;ACTION_SECRET&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">          </span><span class="token application-json property">&quot;value_from_env&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;ACTION_SECRET_ENV&quot;</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token application-json"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;arguments&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">          </span><span class="token application-json property">&quot;name&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;numbers&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">          </span><span class="token application-json property">&quot;type&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;[Int]!&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">        </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;output_type&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;AddResult&quot;</span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">      </span><span class="token application-json property">&quot;handler&quot;</span><span class="token application-json operator" style="color:rgb(0, 0, 0)">:</span><span class="token application-json"> </span><span class="token application-json string" style="color:rgb(163, 21, 21)">&quot;https://hasura-actions-demo.glitch.me/addNumbers&quot;</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">    </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json">  </span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token application-json"></span><br></span><span class="token-line" style="color:#000000"><span class="token application-json"></span><span class="token application-json punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>Before creating an action via the <a href="/graphql-engine/latest/graphql/core/api-reference/metadata-api/actions/#metadata-create-action">create_action metadata API</a>, all custom types
need to be defined via the <a href="/graphql-engine/latest/graphql/core/api-reference/metadata-api/custom-types/#metadata-set-custom-types">set_custom_types</a> metadata API.</p></div></div><p>This secret is only known by Hasura and is passed to your endpoint with
every call, thus making sure only Hasura can successfully authenticate
with the action handler.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>The name for the action secret is not defined by Hasura and can be
chosen freely.</p></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="verify-the-secret-in-your-action-handler">Step 3: Verify the secret in your action handler<a class="hash-link" href="#verify-the-secret-in-your-action-handler" title="Direct link to heading">​</a></h4><p>First, load the action secret as an environment variable in your action
handler by adding it to your <code>.env</code> file (this file might be a different
one depending on your framework).</p><p>Second, you need to write some code in your action handler to check that
the action secret passed as a header equals to the one you stored as an
environment variable.</p><p>The following is an example of a simple authorization middleware with
Express which can be included before the request handler logic:</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx" style="color:#000000;background-color:#ffffff"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#000000"><span class="token comment" style="color:rgb(0, 128, 0)">// use authorization for all routes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token method function property-access" style="color:rgb(0, 0, 255)">use</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">authorizationMiddleware</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// authorize action call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">authorizationMiddleware</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> res</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token function" style="color:rgb(0, 0, 255)">correctSecretProvided</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">req</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">next</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">else</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token method function property-access" style="color:rgb(0, 0, 255)">sendStatus</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">403</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// check if the secret sent in the header equals to the secret stored as an env variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">correctSecretProvided</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">req</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> requiredSecret </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token constant" style="color:rgb(129, 31, 63)">ACTION_SECRET_ENV</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">const</span><span class="token plain"> providedSecret </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;ACTION_SECRET&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> requiredSecret </span><span class="token operator" style="color:rgb(0, 0, 0)">===</span><span class="token plain"> providedSecret</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token comment" style="color:rgb(0, 128, 0)">// Request handler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token method function property-access" style="color:rgb(0, 0, 255)">post</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;/actionHandler&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 0, 0)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token comment" style="color:rgb(0, 128, 0)">// handler logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Additional Resources</h5></div><div class="admonition-content"><p>Introduction to Hasura Actions - <a href="https://hasura.io/events/webinar/hasura-actions/?pg=docs&amp;plcmt=body&amp;cta=view-recording&amp;tech=" target="_blank" rel="noopener noreferrer">View
Recording</a>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/actions/action-handlers.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/graphql-engine/latest/graphql/core/actions/types/index/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Custom types</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/graphql-engine/latest/graphql/core/actions/async-actions/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Async actions</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#http-handler" class="table-of-contents__link toc-highlight">HTTP handler</a></li><li><a href="#returning-a-success-response" class="table-of-contents__link toc-highlight">Returning a success response</a></li><li><a href="#returning-an-error-response" class="table-of-contents__link toc-highlight">Returning an error response</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li><li><a href="#securing-action-handlers" class="table-of-contents__link toc-highlight">Restrict access to your action handler</a><ul><li><a href="#adding-an-action-secret" class="table-of-contents__link toc-highlight">Adding an action secret</a></li></ul></li></ul></div></div></div><div class="custom_doc_item_footer_xzT7"><div class="helpful-wrapper__Ayf"><h4>Did you find this page helpful?</h4><div class="helpful-icon-wrapper_z22E"><div class="helpful-icon_FkyS no_response_Ho0N"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.999" cy="11.999" r="9.917" stroke="gray" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></circle><circle cx="8.001" cy="9.333" r="1.333" fill="gray"></circle><circle cx="16.001" cy="9.333" fill="gray" r="1.333"></circle><path d="M17.716 13.533a5.916 5.916 0 0 1-11.43 0" stroke="gray" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div><div class="helpful-icon_FkyS no_response_Ho0N"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#a)"><circle cx="11.999" cy="11.999" r="9.917" stroke="gray" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></circle><circle cx="8.001" cy="9.333" r="1.333" fill="gray"></circle><circle cx="16.001" cy="9.333" fill="gray" r="1.333"></circle><path d="M6.875 15.708a5.917 5.917 0 0 1 10.248 0" stroke="gray" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h24v24H0z"></path></clipPath></defs></svg></div></div></div><a href="https://cloud.hasura.io/signup?pg=docs&amp;plcmt=pre-footer&amp;cta=try-graphql-with-hasura&amp;tech=default" target="_blank" rel="noopener noreferrer" class="remove-text-decoration_HjzW"><div class="graphql-with-hasura-wrapper_ioP3"><div class="p40_Bc0x"><h3>Start with GraphQL on Hasura for Free</h3><ul class="desc_P0p4"><li><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6a5.98 5.98 0 0 0-4.243 1.76A5.984 5.984 0 0 0 6 12a5.974 5.974 0 0 0-1.757-4.24A5.984 5.984 0 0 0 0 6a5.98 5.98 0 0 0 4.243-1.757A5.989 5.989 0 0 0 6 0a6 6 0 0 0 6 6Z" fill="#8CC3F5"></path></svg>Build apps and APIs 10x faster</li><li><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6a5.98 5.98 0 0 0-4.243 1.76A5.984 5.984 0 0 0 6 12a5.974 5.974 0 0 0-1.757-4.24A5.984 5.984 0 0 0 0 6a5.98 5.98 0 0 0 4.243-1.757A5.989 5.989 0 0 0 6 0a6 6 0 0 0 6 6Z" fill="#8CC3F5"></path></svg>Built-in authorization and caching</li><li><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6a5.98 5.98 0 0 0-4.243 1.76A5.984 5.984 0 0 0 6 12a5.974 5.974 0 0 0-1.757-4.24A5.984 5.984 0 0 0 0 6a5.98 5.98 0 0 0 4.243-1.757A5.989 5.989 0 0 0 6 0a6 6 0 0 0 6 6Z" fill="#8CC3F5"></path></svg>8x more performant than hand-rolled APIs</li></ul><div class="try-hasura-div_QpRH">Try GraphQL with Hasura<div class="arrow_pHav"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 8h9M8.168 12.5l4.5-4.5-4.5-4.5" stroke="#1B2738" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></div></div><div class="show-mobile_O1z8"><img src="/graphql-engine/assets/images/hasura-free-ff60e409244e0ea12b5a3045d1a9096b.png" alt="Promo"></div></div></a><footer class="custom-footer-wrapper_e3DT"><div class="logo-wrapper_Rlsk"><img src="/graphql-engine/img/logo-light.svg" class="dark-theme-logo_PnSy"><img src="/graphql-engine/img/logo.svg" class="light-theme-logo_LXf_"></div><div class="copyright_S0cy">© 2022 Hasura Inc. All rights reserved</div><div class="footerSocialIconsWrapper_h8nV"><div class="socialBrands_HY8t"><a href="https://github.com/hasura/graphql-engine" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg width="24" height="23" viewBox="0 0 24 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12.19 12.19 0 0 0-4.592.897 12.017 12.017 0 0 0-3.893 2.555A11.68 11.68 0 0 0 0 11.786c0 5.209 3.444 9.628 8.208 11.196.6.094.792-.271.792-.59v-1.991c-3.324.707-4.032-1.58-4.032-1.58-.552-1.367-1.332-1.732-1.332-1.732-1.092-.73.084-.707.084-.707 1.2.082 1.836 1.214 1.836 1.214 1.044 1.791 2.808 1.26 3.492.978.108-.766.42-1.285.756-1.58-2.664-.294-5.46-1.307-5.46-5.798 0-1.308.456-2.357 1.236-3.194-.12-.294-.54-1.52.12-3.111 0 0 1.008-.318 3.3 1.202a11.5 11.5 0 0 1 3-.389c1.02 0 2.052.13 3 .39 2.292-1.521 3.3-1.203 3.3-1.203.66 1.591.24 2.817.12 3.111.78.837 1.236 1.886 1.236 3.194 0 4.502-2.808 5.492-5.484 5.787.432.365.828 1.084.828 2.18v3.23c0 .318.192.695.804.589C20.568 21.402 24 16.995 24 11.786c0-1.548-.31-3.08-.913-4.51a11.775 11.775 0 0 0-2.602-3.824A12.017 12.017 0 0 0 16.592.897 12.19 12.19 0 0 0 12 0Z" fill="#74818A"></path></svg></a></div><div class="socialBrands_HY8t"><a href="https://twitter.com/hasurahq" target="_blank" rel="noopener noreferrer" aria-label="Twitter"><svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 2.294a9.83 9.83 0 0 1-2.822.792 4.931 4.931 0 0 0 2.157-2.73 9.913 9.913 0 0 1-3.12 1.204C19.307.574 18.034 0 16.588 0c-2.696 0-4.899 2.203-4.899 4.922 0 .39.046.768.126 1.124A13.99 13.99 0 0 1 1.675.906a4.87 4.87 0 0 0-.665 2.467c0 1.71.86 3.224 2.19 4.084-.814 0-1.57-.23-2.236-.574v.035a4.925 4.925 0 0 0 3.946 4.83 4.843 4.843 0 0 1-2.214.08c.62 1.939 2.42 3.384 4.589 3.419a9.777 9.777 0 0 1-6.115 2.11c-.39 0-.78-.022-1.17-.068a13.933 13.933 0 0 0 7.549 2.214c9.04 0 14.007-7.503 14.007-14.008 0-.218 0-.424-.011-.642A9.833 9.833 0 0 0 24 2.294Z" fill="#74818A"></path></svg></a></div><div class="socialBrands_HY8t"><a href="https://discord.com/invite/hasura" target="_blank" rel="noopener noreferrer" aria-label="Discord"><svg width="24" height="28" viewBox="0 0 24 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m24 27.6-6.3-6 .756 2.4H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h18a3 3 0 0 1 3 3v24.6ZM12 6.96c-3.216 0-5.472 1.38-5.472 1.38C7.764 7.236 9.924 6.6 9.924 6.6l-.204-.204c-2.028.036-3.864 1.44-3.864 1.44-2.064 4.308-1.932 8.028-1.932 8.028C5.604 18.036 8.1 17.88 8.1 17.88l.852-1.08c-1.5-.324-2.448-1.656-2.448-1.656S8.76 16.68 12 16.68c3.24 0 5.496-1.536 5.496-1.536s-.948 1.332-2.448 1.656l.852 1.08s2.496.156 4.176-2.016c0 0 .132-3.72-1.932-8.028 0 0-1.836-1.404-3.864-1.44l-.204.204s2.16.636 3.396 1.74c0 0-2.256-1.38-5.472-1.38Zm-2.484 4.548c.78 0 1.416.684 1.404 1.524 0 .828-.624 1.524-1.404 1.524-.768 0-1.392-.696-1.392-1.524 0-.84.612-1.524 1.392-1.524Zm5.004 0c.78 0 1.404.684 1.404 1.524 0 .828-.624 1.524-1.404 1.524-.768 0-1.392-.696-1.392-1.524 0-.84.612-1.524 1.392-1.524Z" fill="#717780"></path></svg></a></div><div class="socialBrands_HY8t"><a href="https://www.youtube.com/channel/UCZo1ciR8pZvdD3Wxp9aSNhQ" target="_blank" rel="noopener noreferrer" aria-label="Youtube"><svg width="28" height="20" viewBox="0 0 28 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m11.2 14 7.266-4.2L11.2 5.6V14ZM27.384 3.038c.182.658.308 1.54.392 2.66.098 1.12.14 2.086.14 2.926L28 9.8c0 3.066-.224 5.32-.616 6.762-.35 1.26-1.162 2.072-2.422 2.422-.658.182-1.862.308-3.71.392a93.31 93.31 0 0 1-5.026.14L14 19.6c-5.866 0-9.52-.224-10.962-.616-1.26-.35-2.072-1.162-2.422-2.422-.182-.658-.308-1.54-.392-2.66a33.685 33.685 0 0 1-.14-2.926L0 9.8c0-3.066.224-5.32.616-6.762C.966 1.778 1.778.966 3.038.616 3.696.434 4.9.308 6.748.224a93.31 93.31 0 0 1 5.026-.14L14 0c5.866 0 9.52.224 10.962.616 1.26.35 2.072 1.162 2.422 2.422Z" fill="#74818A"></path></svg></a></div><div class="socialBrands_HY8t"><a href="https://www.linkedin.com/company/hasura" target="_blank" rel="noopener noreferrer" aria-label="Linkedin"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.333 0A2.667 2.667 0 0 1 24 2.667v18.666A2.667 2.667 0 0 1 21.333 24H2.667A2.667 2.667 0 0 1 0 21.333V2.667A2.667 2.667 0 0 1 2.667 0h18.666Zm-.666 20.667V13.6a4.347 4.347 0 0 0-4.347-4.347c-1.133 0-2.453.694-3.093 1.734v-1.48h-3.72v11.16h3.72v-6.574a1.86 1.86 0 0 1 1.853-1.866 1.866 1.866 0 0 1 1.867 1.866v6.574h3.72ZM5.173 7.413a2.24 2.24 0 0 0 2.24-2.24c0-1.24-1-2.253-2.24-2.253A2.253 2.253 0 0 0 2.92 5.173c0 1.24 1.013 2.24 2.253 2.24Zm1.854 13.254V9.507H3.333v11.16h3.694Z" fill="#74818A"></path></svg></a></div></div></footer></div></div></div></main></div></div></div>
<script src="/graphql-engine/assets/js/runtime~main.386831d7.js"></script>
<script src="/graphql-engine/assets/js/main.9f72c775.js"></script>
</body>
</html>