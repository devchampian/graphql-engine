"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5257],{3905:function(e,t,r){r.d(t,{Zo:function(){return h},kt:function(){return p}});var a=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=a.createContext({}),m=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},h=function(e){var t=m(e.components);return a.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,c=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),u=m(r),p=o,d=u["".concat(c,".").concat(p)]||u[p]||l[p]||n;return r?a.createElement(d,i(i({ref:t},h),{},{components:r})):a.createElement(d,i({ref:t},h))}));function p(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,i=new Array(n);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var m=2;m<n;m++)i[m]=r[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},85074:function(e,t,r){r.r(t),r.d(t,{assets:function(){return h},contentTitle:function(){return c},default:function(){return p},frontMatter:function(){return s},metadata:function(){return m},toc:function(){return l}});var a=r(83117),o=r(80102),n=(r(67294),r(3905)),i=["components"],s={description:"Authorization in your remote schema server with Hasura",keywords:["hasura","docs","remote schema","authorization"],sidebar_position:2},c="Forwarding auth context to/from remote schemas",m={unversionedId:"graphql/core/remote-schemas/auth/remote-schema-forward-auth",id:"graphql/core/remote-schemas/auth/remote-schema-forward-auth",title:"Forwarding auth context to/from remote schemas",description:"Authorization in your remote schema server with Hasura",source:"@site/docs/graphql/core/remote-schemas/auth/remote-schema-forward-auth.mdx",sourceDirName:"graphql/core/remote-schemas/auth",slug:"/graphql/core/remote-schemas/auth/remote-schema-forward-auth",permalink:"/graphql-engine/latest/graphql/core/remote-schemas/auth/remote-schema-forward-auth",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/remote-schemas/auth/remote-schema-forward-auth.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{description:"Authorization in your remote schema server with Hasura",keywords:["hasura","docs","remote schema","authorization"],sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Authorization in remote schemas",permalink:"/graphql-engine/latest/graphql/core/remote-schemas/auth/index"},next:{title:"Remote schema permissions",permalink:"/graphql-engine/latest/graphql/core/remote-schemas/auth/remote-schema-permissions"}},h={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Passing headers from Hasura to your remote schema",id:"passing-headers-from-hasura-to-your-remote-schema",level:2},{value:"Passing cookie headers from your remote schema to the client",id:"passing-cookie-headers-from-your-remote-schema-to-the-client",level:2}],u={toc:l};function p(e){var t=e.components,r=(0,o.Z)(e,i);return(0,n.kt)("wrapper",(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"forwarding-auth-context-tofrom-remote-schemas"},"Forwarding auth context to/from remote schemas"),(0,n.kt)("h2",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"This page gives an overview of how Hasura allows you to pass auth context to your remote schema server."),(0,n.kt)("h2",{id:"passing-headers-from-hasura-to-your-remote-schema"},"Passing headers from Hasura to your remote schema"),(0,n.kt)("p",null,"Hasura will forward the resolved ",(0,n.kt)("inlineCode",{parentName:"p"},"x-hasura-*")," values as headers to your remote schema. You can use this information to apply authorization rules in your server. You don't have to redo authentication in your remote schema server."),(0,n.kt)("p",null,"You can also configure Hasura to have (as shown ",(0,n.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/remote-schemas/adding-schema#merge-remote-schema"},"here"),"):"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"static header values that are sent to the remote server"),(0,n.kt)("li",{parentName:"ol"},"forward all headers from the client (like ",(0,n.kt)("inlineCode",{parentName:"li"},"Authorization"),", ",(0,n.kt)("inlineCode",{parentName:"li"},"Cookie")," headers etc.)"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/remote-schemas/auth/remote-schema-permissions"},"Fine grained access control"))),(0,n.kt)("p",null,"In case there are multiple headers with same name, the order of precedence is: configuration headers ",">"," resolved user (",(0,n.kt)("inlineCode",{parentName:"p"},"x-hasura-*"),") variables ",">"," client headers."),(0,n.kt)("p",null,"So for example, if the client sends an ",(0,n.kt)("inlineCode",{parentName:"p"},"Authorization")," header, and the configuration also has an ",(0,n.kt)("inlineCode",{parentName:"p"},"Authorization")," header, the configuration header value will selected."),(0,n.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"The headers from the client behave similarly to the authorization system. If ",(0,n.kt)("inlineCode",{parentName:"p"},"x-hasura-admin-secret")," is sent, then all ",(0,n.kt)("inlineCode",{parentName:"p"},"x-hasura-*")," values from the client are respected, otherwise they are ignored."))),(0,n.kt)("h2",{id:"passing-cookie-headers-from-your-remote-schema-to-the-client"},"Passing cookie headers from your remote schema to the client"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"Set-Cookie")," headers from your remote schema servers are sent back to the client over HTTP transport. ",(0,n.kt)("strong",{parentName:"p"},'Over websocket transport there exists no means of sending headers after a query/mutation and hence the "Set-Cookie" headers are not sent to the client.')," Use HTTP transport if your remote servers set cookies."),(0,n.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Additional Resources")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"Data Federation with Hasura - ",(0,n.kt)("a",{parentName:"p",href:"https://hasura.io/events/webinar/data-federation-hasura-graphql/?pg=docs&plcmt=body&cta=watch-webinar&tech="},"Watch Webinar"),"."))))}p.isMDXComponent=!0}}]);