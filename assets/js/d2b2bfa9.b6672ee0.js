"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[829],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return g}});var s=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=s.createContext({}),l=function(e){var t=s.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return s.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},d=s.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=l(r),g=n,b=d["".concat(u,".").concat(g)]||d[g]||c[g]||a;return r?s.createElement(b,i(i({ref:t},p),{},{components:r})):s.createElement(b,i({ref:t},p))}));function g(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var l=2;l<a;l++)i[l]=r[l];return s.createElement.apply(null,i)}return s.createElement.apply(null,r)}d.displayName="MDXCreateElement"},40436:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return u},default:function(){return g},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return c}});var s=r(83117),n=r(80102),a=(r(67294),r(3905)),i=["components"],o={description:"Manage subscriptions on Postgres with Hasura",sidebar_label:"Live queries",keywords:["hasura","docs","postgres","subscription","live queries"],slug:"index"},u="Postgres: Live query subscriptions",l={unversionedId:"graphql/core/databases/postgres/subscriptions/livequery/index",id:"graphql/core/databases/postgres/subscriptions/livequery/index",title:"Postgres: Live query subscriptions",description:"Manage subscriptions on Postgres with Hasura",source:"@site/docs/graphql/core/databases/postgres/subscriptions/livequery/index.mdx",sourceDirName:"graphql/core/databases/postgres/subscriptions/livequery",slug:"/graphql/core/databases/postgres/subscriptions/livequery/index",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/index",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/databases/postgres/subscriptions/livequery/index.mdx",tags:[],version:"current",frontMatter:{description:"Manage subscriptions on Postgres with Hasura",sidebar_label:"Live queries",keywords:["hasura","docs","postgres","subscription","live queries"],slug:"index"},sidebar:"docsSidebar",previous:{title:"Postgres: Subscriptions",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/index"},next:{title:"Sample use cases",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/use-cases"}},p={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Convert a query to a subscription",id:"convert-a-query-to-a-subscription",level:2},{value:"Use cases",id:"use-cases",level:2}],d={toc:c};function g(e){var t=e.components,r=(0,n.Z)(e,i);return(0,a.kt)("wrapper",(0,s.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"postgres-live-query-subscriptions"},"Postgres: Live query subscriptions"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"A Live query subscription will return the latest result of the query being made\nand not necessarily all the individual events leading up to the result."),(0,a.kt)("p",null,"By default, updates are delivered to clients every ",(0,a.kt)("strong",{parentName:"p"},"1 sec"),"."),(0,a.kt)("p",null,"See more details on ",(0,a.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/execution-and-performance"},"subscriptions execution and performance"),"."),(0,a.kt)("h2",{id:"convert-a-query-to-a-subscription"},"Convert a query to a subscription"),(0,a.kt)("p",null,"You can turn any query into a subscription by simply replacing ",(0,a.kt)("inlineCode",{parentName:"p"},"query"),"\nwith ",(0,a.kt)("inlineCode",{parentName:"p"},"subscription")," as the operation type."),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Caveat")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Hasura follows the ",(0,a.kt)("a",{parentName:"p",href:"https://graphql.github.io/graphql-spec/June2018/#sec-Single-root-field"},"GraphQL spec"),"\nwhich allows for only one root field in a subscription."))),(0,a.kt)("h2",{id:"use-cases"},"Use cases"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/use-cases#pg-subscribe-field"},"Subscribe to the latest value of a particular field")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/use-cases#pg-subscribe-table"},"Subscribe to changes to a table\u2019s entries")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/databases/postgres/subscriptions/livequery/use-cases#pg-subscribe-derived"},"Subscribe to the latest value of some derived data"))))}g.isMDXComponent=!0}}]);