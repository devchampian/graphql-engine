"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7327],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(u,".").concat(d)]||p[d]||h[d]||i;return n?a.createElement(g,o(o({ref:t},l),{},{components:n})):a.createElement(g,o({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},58758:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return u},default:function(){return d},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return h}});var a=n(83117),r=n(80102),i=(n(67294),n(3905)),o=["components"],s={description:"Manage unauthenticated / public access in Hasura",keywords:["hasura","docs","authentication","auth","unauthenticated access","public access"],sidebar_position:4},u="Unauthenticated / Public access",c={unversionedId:"graphql/core/auth/authentication/unauthenticated-access",id:"graphql/core/auth/authentication/unauthenticated-access",title:"Unauthenticated / Public access",description:"Manage unauthenticated / public access in Hasura",source:"@site/docs/graphql/core/auth/authentication/unauthenticated-access.mdx",sourceDirName:"graphql/core/auth/authentication",slug:"/graphql/core/auth/authentication/unauthenticated-access",permalink:"/graphql-engine/latest/graphql/core/auth/authentication/unauthenticated-access",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/auth/authentication/unauthenticated-access.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{description:"Manage unauthenticated / public access in Hasura",keywords:["hasura","docs","authentication","auth","unauthenticated access","public access"],sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Using JWT",permalink:"/graphql-engine/latest/graphql/core/auth/authentication/jwt"},next:{title:"Authorization / Access control",permalink:"/graphql-engine/latest/graphql/core/auth/authorization/index"}},l={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Configuring unauthenticated / public access",id:"configuring-unauthenticated--public-access",level:2},{value:"No auth setup",id:"no-auth-setup",level:3},{value:"Webhooks",id:"webhooks",level:3},{value:"JWT",id:"jwt",level:3}],p={toc:h};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"unauthenticated--public-access"},"Unauthenticated / Public access"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"It is a common requirement to have requests which are accessible to all\nusers without the need for any authentication (logging in). For example,\nto display a public feed of events."),(0,i.kt)("p",null,"Once you have configured an ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/deployment/securing-graphql-endpoint"},"admin secret"),",\nby default Hasura GraphQL engine will reject any unauthenticated request\nit receives."),(0,i.kt)("p",null,"You can configure Hasura GraphQL engine to allow access to\nunauthenticated users by defining a specific role which will be set for\nall unauthenticated requests. Once an unauthenticated role is\nconfigured, unauthenticated requests will not be rejected and instead\nthe request will be made with the configured role."),(0,i.kt)("p",null,"This role can then be used to define the permissions for unauthenticated\nusers as described in ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authorization/index"},"Authorization / Access control"),". A guide on setting up\nunauthenticated user permissions can be found\n",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authorization/common-roles-auth-examples#anonymous-users-example"},"here"),"."),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Risk of using session variables")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is recommended to not use\n",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authorization/roles-variables#dynamic-session-variables"},"session variables")," in the permissions of an\nunauthenticated role because the source of the session variables cannot\nbe trusted. As session variables can be passed using request headers, a\nuser can choose to send any values for them and it needs to be ensured\nthat they can't get access to sensitive data just by setting different\nvalues for their session variables."))),(0,i.kt)("h2",{id:"configuring-unauthenticated--public-access"},"Configuring unauthenticated / public access"),(0,i.kt)("p",null,"An unauthenticated role can be configured for the following scenarios:\nno auth setup, webhook auth setup or JWT auth setup."),(0,i.kt)("h3",{id:"no-auth-setup"},"No auth setup"),(0,i.kt)("p",null,"With no auth setup, every request is considered an unauthenticated\nrequest."),(0,i.kt)("p",null,"You can use the env variable ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_UNAUTHORIZED_ROLE")," or the\n",(0,i.kt)("inlineCode",{parentName:"p"},"--unauthorized-role")," flag to set a role for unauthenticated (non-logged\nin) users. See ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/deployment/graphql-engine-flags/reference"},"GraphQL Engine server config reference")," for more details on setting this\nflag/env var."),(0,i.kt)("h3",{id:"webhooks"},"Webhooks"),(0,i.kt)("p",null,"For ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authentication/webhook"},"webhook authentication"),", any request for which the\nwebhook returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"401 Unauthorized")," response is considered an\nunauthenticated request."),(0,i.kt)("p",null,"To allow unauthenticated access, the auth webhook should return a ",(0,i.kt)("inlineCode",{parentName:"p"},"200"),"\nstatus response with your unauthenticated role in the headers. For\ndetails on the webhook response, refer to\n",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authentication/webhook#webhook-response"},"this section"),"."),(0,i.kt)("h3",{id:"jwt"},"JWT"),(0,i.kt)("p",null,"For ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/auth/authentication/jwt"},"JWT authentication"),", any request which does not contain\na JWT token is considered an unauthenticated request."),(0,i.kt)("p",null,"You can use the env variable ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_UNAUTHORIZED_ROLE")," or the\n",(0,i.kt)("inlineCode",{parentName:"p"},"--unauthorized-role")," flag to set a role for unauthenticated (non-logged\nin) users. See ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/deployment/graphql-engine-flags/reference"},"GraphQL Engine server config reference")," for more details on setting this\nflag/env var."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Additional Resources")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Enterprise Grade Authorization - ",(0,i.kt)("a",{parentName:"p",href:"https://hasura.io/events/webinar/authorization-modeling-hasura/?pg=docs&plcmt=body&cta=watch-webinar&tech="},"Watch Webinar"),"."))))}d.isMDXComponent=!0}}]);