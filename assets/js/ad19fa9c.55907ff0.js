"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3849],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(r),m=a,g=d["".concat(l,".").concat(m)]||d[m]||p[m]||s;return r?n.createElement(g,i(i({ref:t},u),{},{components:r})):n.createElement(g,i({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,i=new Array(s);i[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<s;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},22138:function(e,t,r){var n=r(67294),a=r(57932),s=r(72389),i=r(86010),o=r(71077);t.Z=function(e){var t=e.query,r=e.variables,l=e.response,c=e.viewOnly,u=void 0===c||c,p=(0,s.Z)();return n.createElement("div",{className:"graphiql "+(0,i.Z)({"with-vars":!!r,"view-only":u})},n.createElement(a.ZP,{readOnly:u,editorTheme:"dracula",schema:null,fetcher:p?(0,o.n)({url:"https://hasura.io/graphql"}):function(){return null},query:t,variables:r,response:l}))}},8170:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return d}});var n=r(83117),a=r(80102),s=(r(67294),r(3905)),i=r(22138),o=["components"],l={sidebar_label:"Distinct query results",sidebar_position:6,description:"Make distinct queries on Postgres with Hasura",keywords:["hasura","docs","postgres","query","distinct query"]},c="Postgres: Distinct query results",u={unversionedId:"graphql/core/databases/postgres/queries/distinct-queries",id:"graphql/core/databases/postgres/queries/distinct-queries",title:"Postgres: Distinct query results",description:"Make distinct queries on Postgres with Hasura",source:"@site/docs/graphql/core/databases/postgres/queries/distinct-queries.mdx",sourceDirName:"graphql/core/databases/postgres/queries",slug:"/graphql/core/databases/postgres/queries/distinct-queries",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/queries/distinct-queries",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/databases/postgres/queries/distinct-queries.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_label:"Distinct query results",sidebar_position:6,description:"Make distinct queries on Postgres with Hasura",keywords:["hasura","docs","postgres","query","distinct query"]},sidebar:"docsSidebar",previous:{title:"Sort query results",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/queries/sorting"},next:{title:"Paginate query results",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/queries/pagination"}},p={},d=[{value:"The <strong>distinct_on</strong> argument",id:"the-distinct_on-argument",level:2},{value:"Fetch results with distinct values of a particular field",id:"fetch-results-with-distinct-values-of-a-particular-field",level:2}],m={toc:d};function g(e){var t=e.components,r=(0,a.Z)(e,o);return(0,s.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"postgres-distinct-query-results"},"Postgres: Distinct query results"),(0,s.kt)("h2",{id:"the-distinct_on-argument"},"The ",(0,s.kt)("strong",{parentName:"h2"},"distinct_on")," argument"),(0,s.kt)("p",null,"You can fetch rows with only distinct values of a column using the\n",(0,s.kt)("inlineCode",{parentName:"p"},"distinct_on")," argument."),(0,s.kt)("p",null,"It is typically recommended to use ",(0,s.kt)("inlineCode",{parentName:"p"},"order_by")," along with ",(0,s.kt)("inlineCode",{parentName:"p"},"distinct_on"),"\nto ensure we get predictable results ",(0,s.kt)("em",{parentName:"p"},"(otherwise any arbitrary row with\na distinct value of the column may be returned)"),". Note that the\n",(0,s.kt)("inlineCode",{parentName:"p"},"distinct_on")," column needs to be the first column in the ",(0,s.kt)("inlineCode",{parentName:"p"},"order_by"),"\nexpression. See ",(0,s.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/databases/postgres/queries/sorting"},"sort queries")," for more info on\nusing ",(0,s.kt)("inlineCode",{parentName:"p"},"order_by"),"."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-graphql"},'employees (\n  distinct_on: [employees_select_column]\n  order_by: [employees_order_by]\n): [employees]!\n\n# select column enum type for "employees" table\nenum employees_select_column {\n  id\n  name\n  department\n  salary\n}\n')),(0,s.kt)("p",null,"You can see the complete specification of the ",(0,s.kt)("inlineCode",{parentName:"p"},"distinct_on")," argument in\nthe ",(0,s.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/api-reference/graphql-api/query#distinctonexp"},"API reference"),"."),(0,s.kt)("h2",{id:"fetch-results-with-distinct-values-of-a-particular-field"},"Fetch results with distinct values of a particular field"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"For example"),", fetch the employee with the highest salary from each\ndepartment:"),(0,s.kt)(i.Z,{query:"query {\n  employees (\n    distinct_on: [department]\n    order_by: [\n      {department: asc},\n      {salary: desc}\n    ]\n  ) {\n    id\n    name\n    department\n    salary\n  }\n}",response:'{\n "data": {\n   "employees": [\n     {\n       "id": 5,\n       "name": "Kamila",\n       "department": "Engineering",\n       "salary": 4325\n     },\n     {\n       "id": 4,\n       "name": "Damien",\n       "department": "Product",\n       "salary": 3124\n     },\n     {\n       "id": 7,\n       "name": "Rickard",\n       "department": "Services",\n       "salary": 2223\n     }\n   ]\n }\n}',mdxType:"GraphiQLIDE"}))}g.isMDXComponent=!0}}]);