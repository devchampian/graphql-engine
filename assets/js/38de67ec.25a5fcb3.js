"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7556],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return m}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(a),m=r,g=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return a?n.createElement(g,o(o({ref:t},c),{},{components:a})):n.createElement(g,o({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},3467:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return u}});var n=a(83117),r=a(80102),i=(a(67294),a(3905)),o=["components"],s={sidebar_label:"Creating a seed data migration",sidebar_position:4,description:"Create a seed data migration in Hasura",keywords:["hasura","docs","migration","seed data"]},l="Creating a seed data migration",d={unversionedId:"graphql/core/migrations/advanced/seed-data-migration",id:"graphql/core/migrations/advanced/seed-data-migration",title:"Creating a seed data migration",description:"Create a seed data migration in Hasura",source:"@site/docs/graphql/core/migrations/advanced/seed-data-migration.mdx",sourceDirName:"graphql/core/migrations/advanced",slug:"/graphql/core/migrations/advanced/seed-data-migration",permalink:"/graphql-engine/latest/graphql/core/migrations/advanced/seed-data-migration",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/migrations/advanced/seed-data-migration.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_label:"Creating a seed data migration",sidebar_position:4,description:"Create a seed data migration in Hasura",keywords:["hasura","docs","migration","seed data"]},sidebar:"docsSidebar",previous:{title:"Rolling back applied migrations",permalink:"/graphql-engine/latest/graphql/core/migrations/advanced/rolling-back-migrations"},next:{title:"Resetting Hasura migrations",permalink:"/graphql-engine/latest/graphql/core/migrations/advanced/resetting-migrations"}},c={},u=[{value:"Use case",id:"use-case",level:2},{value:"Step 1: Run the console via the Hasura CLI",id:"step-1-run-the-console-via-the-hasura-cli",level:2},{value:"Step 2: Navigate to the SQL section",id:"step-2-navigate-to-the-sql-section",level:2},{value:"Step 3: Write an insert statement",id:"step-3-write-an-insert-statement",level:2},{value:"Step 4: Mark the insert as a migration",id:"step-4-mark-the-insert-as-a-migration",level:2},{value:"Step 5: Run the statement",id:"step-5-run-the-statement",level:2},{value:"Step 6: Verify data &amp; migration",id:"step-6-verify-data--migration",level:2}],p={toc:u};function m(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"creating-a-seed-data-migration"},"Creating a seed data migration"),(0,i.kt)("h2",{id:"use-case"},"Use case"),(0,i.kt)("p",null,"It can be convenient to add some seed data into tables as part of the DB\ninit process."),(0,i.kt)("h2",{id:"step-1-run-the-console-via-the-hasura-cli"},"Step 1: Run the console via the Hasura CLI"),(0,i.kt)("p",null,"In order to make sure that the migrations get created, the console needs\nto be run via the Hasura CLI."),(0,i.kt)("h2",{id:"step-2-navigate-to-the-sql-section"},"Step 2: Navigate to the SQL section"),(0,i.kt)("p",null,"On the Hasura console, click on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Data")," tab and then on the ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL"),"\nlink on the left hand side."),(0,i.kt)("h2",{id:"step-3-write-an-insert-statement"},"Step 3: Write an insert statement"),(0,i.kt)("p",null,"The next step is to write an insert statement that populates the\ndatabase with seed data like the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO addresses (id, location) VALUES\n  (1, 'Bangalore'),\n  (2, 'Tel Aviv'),\n  (3, 'Zurich');\nINSERT INTO authors (id, name, address_id) VALUES\n  (1, 'Sarah', 3),\n  (2, 'Joey', 1),\n  (3, 'Rachel', 2);\nINSERT INTO articles (id, title, content, author_id) VALUES\n  (1, 'How to make fajitas', 'Recipe on making the best fajitas in the world', 1),\n  (2, 'How to climb mount everest', 'Guide on successfully climbing the hightest mountain in the world', 3),\n  (3, 'How to be successful on broadway', 'What it takes for you to be a successful performer at broadway', 2);\n")),(0,i.kt)("h2",{id:"step-4-mark-the-insert-as-a-migration"},"Step 4: Mark the insert as a migration"),(0,i.kt)("p",null,"Check the box ",(0,i.kt)("inlineCode",{parentName:"p"},"This is a migration")," and give the migration a name, e.g.\n",(0,i.kt)("inlineCode",{parentName:"p"},"insert_seed_data"),"."),(0,i.kt)("h2",{id:"step-5-run-the-statement"},"Step 5: Run the statement"),(0,i.kt)("p",null,"Hit the ",(0,i.kt)("inlineCode",{parentName:"p"},"Run!")," button."),(0,i.kt)("h2",{id:"step-6-verify-data--migration"},"Step 6: Verify data & migration"),(0,i.kt)("p",null,"If the insert statement was successful, the data is now added to the DB."),(0,i.kt)("p",null,"Navigate to the ",(0,i.kt)("inlineCode",{parentName:"p"},"migrations")," directory in your Hasura project. The\nlatest migration will be the the insert statement that was just run."))}m.isMDXComponent=!0}}]);