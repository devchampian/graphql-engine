"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5679],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return u}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),c=s(a),u=r,h=c["".concat(p,".").concat(u)]||c[u]||d[u]||i;return a?n.createElement(h,l(l({ref:t},m),{},{components:a})):n.createElement(h,l({ref:t},m))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},1124:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return u},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return d}});var n=a(83117),r=a(80102),i=(a(67294),a(3905)),l=["components"],o={sidebar_label:"Relationships",sidebar_position:4,description:"Use relationships with the Hasura metadata API",keywords:["hasura","docs","metadata API","API reference","relationship"]},p="Metadata API Reference: Relationships",s={unversionedId:"graphql/core/api-reference/metadata-api/relationship",id:"graphql/core/api-reference/metadata-api/relationship",title:"Metadata API Reference: Relationships",description:"Use relationships with the Hasura metadata API",source:"@site/docs/graphql/core/api-reference/metadata-api/relationship.mdx",sourceDirName:"graphql/core/api-reference/metadata-api",slug:"/graphql/core/api-reference/metadata-api/relationship",permalink:"/docs/latest/graphql/core/api-reference/metadata-api/relationship",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/api-reference/metadata-api/relationship.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_label:"Relationships",sidebar_position:4,description:"Use relationships with the Hasura metadata API",keywords:["hasura","docs","metadata API","API reference","relationship"]},sidebar:"docsSidebar",previous:{title:"Custom Functions",permalink:"/docs/latest/graphql/core/api-reference/metadata-api/custom-functions"},next:{title:"Permissions",permalink:"/docs/latest/graphql/core/api-reference/metadata-api/permission"}},m={},d=[{value:"Introduction",id:"introduction",level:2},{value:"pg_create_object_relationship",id:"metadata-pg-create-object-relationship",level:2},{value:"1. Using foreign key constraint on a column",id:"1-using-foreign-key-constraint-on-a-column",level:3},{value:"2. Using foreign key constraint on a remote table",id:"2-using-foreign-key-constraint-on-a-remote-table",level:3},{value:"3. Manual configuration",id:"metadata-pg-manual-obj-relationship",level:3},{value:"Args syntax",id:"metadata-pg-create-object-relationship-syntax",level:3},{value:"pg_create_array_relationship",id:"metadata-pg-create-array-relationship",level:2},{value:"1. Using foreign key constraint on a column",id:"1-using-foreign-key-constraint-on-a-column-1",level:3},{value:"2. Manual configuration",id:"2-manual-configuration",level:3},{value:"Args syntax",id:"metadata-pg-create-array-relationship-syntax",level:3},{value:"pg_drop_relationship",id:"metadata-pg-drop-relationship",level:2},{value:"Args syntax",id:"metadata-pg-drop-relationship-syntax",level:3},{value:"pg_set_relationship_comment",id:"metadata-pg-set-relationship-comment",level:2},{value:"Args syntax",id:"metadata-pg-set-relationship-comment-syntax",level:3},{value:"pg_rename_relationship",id:"metadata-pg-rename-relationship",level:2},{value:"Args syntax",id:"metadata-pg-rename-relationship-syntax",level:3},{value:"mssql_create_object_relationship",id:"mssql-create-object-relationship",level:2},{value:"1. Using foreign key constraint on a column",id:"1-using-foreign-key-constraint-on-a-column-2",level:3},{value:"2. Using foreign key constraint on a remote table",id:"2-using-foreign-key-constraint-on-a-remote-table-1",level:3},{value:"3. Manual configuration",id:"mssql-manual-obj-relationship",level:3},{value:"Args syntax",id:"mssql-create-object-relationship-syntax",level:3},{value:"mssql_create_array_relationship",id:"mssql-create-array-relationship",level:2},{value:"1. Using foreign key constraint on a column",id:"1-using-foreign-key-constraint-on-a-column-3",level:3},{value:"2. Manual configuration",id:"2-manual-configuration-1",level:3},{value:"Args syntax",id:"mssql-create-array-relationship-syntax",level:3},{value:"mssql_drop_relationship",id:"mssql-drop-relationship",level:2},{value:"Args syntax",id:"mssql-drop-relationship-syntax",level:3},{value:"mssql_set_relationship_comment",id:"mssql-set-relationship-comment",level:2},{value:"Args syntax",id:"mssql-set-relationship-comment-syntax",level:3},{value:"mssql_rename_relationship",id:"mssql-rename-relationship",level:2},{value:"Args syntax",id:"mssql-rename-relationship-syntax",level:3}],c={toc:d};function u(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"metadata-api-reference-relationships"},"Metadata API Reference: Relationships"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"When retrieving data from tables, it is very helpful if we can also\nfetch the related data alongside the columns. This is where\nrelationships come in. They can be considered as pseudo columns for a\ntable to access the related data."),(0,i.kt)("p",null,"For a simple ",(0,i.kt)("inlineCode",{parentName:"p"},"article/author")," schema, the following relationships exist:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"author")," of an ",(0,i.kt)("inlineCode",{parentName:"li"},"article")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"articles")," of an ",(0,i.kt)("inlineCode",{parentName:"li"},"author"))),(0,i.kt)("p",null,"There are two kinds of relationships:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"one-to-one or ",(0,i.kt)("inlineCode",{parentName:"li"},"object relationships")," (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"author"),")."),(0,i.kt)("li",{parentName:"ul"},"one-to-many or ",(0,i.kt)("inlineCode",{parentName:"li"},"array relationships")," (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"articles"),").")),(0,i.kt)("p",null,"The above represents the same table relationship from different\nperspectives: there is a single ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," for every ",(0,i.kt)("inlineCode",{parentName:"p"},"article"),"\n(one-to-one), but there may be multiple ",(0,i.kt)("inlineCode",{parentName:"p"},"articles")," for every ",(0,i.kt)("inlineCode",{parentName:"p"},"author"),"\n(one-to-many)."),(0,i.kt)("p",null,"A table relationship may be one-to-one from both perspectives. For\nexample, given tables ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"author_details"),", if the\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_details")," table has a primary key ",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," which is a foreign\nkey to the ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," table's primary key ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),". In this case there will be\na single ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," for every ",(0,i.kt)("inlineCode",{parentName:"p"},"author_details")," and a single ",(0,i.kt)("inlineCode",{parentName:"p"},"details")," for\nevery ",(0,i.kt)("inlineCode",{parentName:"p"},"author")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Supported from")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The metadata API is supported for versions ",(0,i.kt)("inlineCode",{parentName:"p"},"v2.0.0")," and above and\nreplaces the older ",(0,i.kt)("a",{parentName:"p",href:"/docs/latest/graphql/core/api-reference/schema-metadata-api/index"},"schema/metadata API"),"."))),(0,i.kt)("h2",{id:"metadata-pg-create-object-relationship"},"pg_create_object_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"create_object_relationship")," is used to create an object relationship on\na table. There cannot be an existing column or relationship with the\nsame name."),(0,i.kt)("p",null,"There are 3 ways in which you can create an object relationship."),(0,i.kt)("h3",{id:"1-using-foreign-key-constraint-on-a-column"},"1. Using foreign key constraint on a column"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"object relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_create_object_relationship",\n    "args": {\n        "table": "article",\n        "name": "author",\n        "source": "default",\n        "using": {\n            "foreign_key_constraint_on" : ["author_id"]\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In the case that the key uses only a single column it is permissible to\ngive just a string instead of a list, i.e.:\n",(0,i.kt)("inlineCode",{parentName:"p"},'"foreign_key_constraint_on" : "author_id"'),"."))),(0,i.kt)("h3",{id:"2-using-foreign-key-constraint-on-a-remote-table"},"2. Using foreign key constraint on a remote table"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"object relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"details")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_details")," ",(0,i.kt)("em",{parentName:"p"},"table"),"'s\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," ",(0,i.kt)("em",{parentName:"p"},"column"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "create_object_relationship",\n    "args": {\n        "table": "author",\n        "name": "details",\n        "using": {\n            "foreign_key_constraint_on" : {\n                "table": "author_details",\n                "columns": ["author_id"]\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Deprecation")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For compatibility with previous versions we also support the form of\n",(0,i.kt)("inlineCode",{parentName:"p"},"foreign_key_constraint_on")," with a ",(0,i.kt)("inlineCode",{parentName:"p"},"column"),"-field, e.g.:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "foreign_key_constraint_on" : {\n    "table": "author_details",\n    "column": "author_id"\n  }\n}\n')),(0,i.kt)("p",{parentName:"div"},"This form is deprecated in favor of the more general ",(0,i.kt)("inlineCode",{parentName:"p"},"columns")," field."))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Supported from")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Relationships via remote table are supported for versions\n",(0,i.kt)("inlineCode",{parentName:"p"},"v2.0.0-alpha.3")," and above."))),(0,i.kt)("h3",{id:"metadata-pg-manual-obj-relationship"},"3. Manual configuration"),(0,i.kt)("p",null,"This is an advanced feature which is mostly used to define relationships\non or to views. We cannot rely on foreign key constraints as they are\nnot valid to or from views. So, when using manual configuration, we have\nto specify the remote table and how columns in this table are mapped to\nthe columns of the remote table."),(0,i.kt)("p",null,"Let's say we have a view called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," which has three columns\n",(0,i.kt)("inlineCode",{parentName:"p"},"article_id")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"view_count")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"average_rating"),". We can now define an\nobject relationship called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," on the ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," table as\nfollows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_create_object_relationship",\n    "args": {\n        "table": "article",\n        "name": "article_detail",\n        "source": "default",\n        "using": {\n            "manual_configuration" : {\n                "remote_table" : "article_detail",\n                "column_mapping" : {\n                    "id" : "article_id"\n                }\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is easy to make mistakes while using ",(0,i.kt)("inlineCode",{parentName:"p"},"manual_configuration"),". One\nsimple check is to ensure that foreign key constraint semantics are\nvalid on the columns being used in ",(0,i.kt)("inlineCode",{parentName:"p"},"column_mapping"),". In the previous\nexample, if it was allowed, a foreign key constraint could have been\ndefined on ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," table's ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," column to ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," view's\n",(0,i.kt)("inlineCode",{parentName:"p"},"article_id")," column."))),(0,i.kt)("h3",{id:"metadata-pg-create-object-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the new relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"using"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#objrelusing"},"ObjRelUsing")),(0,i.kt)("td",{parentName:"tr",align:null},"Use one of the available ways to define an object relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"text"),(0,i.kt)("td",{parentName:"tr",align:null},"comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"metadata-pg-create-array-relationship"},"pg_create_array_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"create_array_relationship")," is used to create an array relationship on a\ntable. There cannot be an existing column or relationship with the same name."),(0,i.kt)("p",null,"There are 2 ways in which you can create an array relationship."),(0,i.kt)("h3",{id:"1-using-foreign-key-constraint-on-a-column-1"},"1. Using foreign key constraint on a column"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"array relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"articles")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column of the ",(0,i.kt)("inlineCode",{parentName:"p"},"article"),"\ntable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_create_array_relationship",\n    "args": {\n        "table": "author",\n        "name": "articles",\n        "source": "default",\n        "using": {\n            "foreign_key_constraint_on" : {\n                "table" : "article",\n                "columns" : ["author_id"]\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Deprecation")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For compatibility with previous version we also support the form of\n",(0,i.kt)("inlineCode",{parentName:"p"},"foreign_key_constraint_on")," with a ",(0,i.kt)("inlineCode",{parentName:"p"},"column"),"-field, e.g.:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "foreign_key_constraint_on" : {\n    "table": "author_details",\n    "column": "author_id"\n  }\n}\n')),(0,i.kt)("p",{parentName:"div"},"This form is deprecated in favor of the more general ",(0,i.kt)("inlineCode",{parentName:"p"},"columns")," field."))),(0,i.kt)("h3",{id:"2-manual-configuration"},"2. Manual configuration"),(0,i.kt)("p",null,"This is an advanced feature which is mostly used to define relationships\non or to views. We cannot rely on foreign key constraints as they are\nnot valid to or from views. So, when using manual configuration, we have\nto specify the remote table and how columns in this table are mapped to\nthe columns of the remote table."),(0,i.kt)("p",null,"Let's say we have a view called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," which has four columns\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"article_id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"view_count")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"average_rating"),". We can now\ndefine an array relationship called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_details")," on the ",(0,i.kt)("inlineCode",{parentName:"p"},"author"),"\ntable as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_create_array_relationship",\n    "args": {\n        "table": "author",\n        "name": "article_details",\n        "source": "default",\n        "using": {\n            "manual_configuration" : {\n                "remote_table" : "article_detail",\n                "column_mapping" : {\n                    "id" : "author_id"\n                }\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is easy to make mistakes while using ",(0,i.kt)("inlineCode",{parentName:"p"},"manual_configuration"),". One\nsimple check is to ensure that foreign key constraint semantics are\nvalid on the columns being used in ",(0,i.kt)("inlineCode",{parentName:"p"},"column_mapping"),". In the previous\nexample, if it was allowed, a foreign key constraint could have been\ndefined on the ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," table's ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," column to ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," view's\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column."))),(0,i.kt)("h3",{id:"metadata-pg-create-array-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the new relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"using"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#arrrelusing"},"ArrRelUsing")),(0,i.kt)("td",{parentName:"tr",align:null},"Use one of the available ways to define an array relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"text"),(0,i.kt)("td",{parentName:"tr",align:null},"comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"metadata-pg-drop-relationship"},"pg_drop_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"pg_drop_relationship")," is used to drop a relationship (both object and\narray) on a table. If there are other objects dependent on this\nrelationship like permissions and query templates, etc., the request\nwill fail and report the dependencies unless ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),".\nIf ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", the dependent objects are also dropped."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_drop_relationship",\n    "args": {\n        "table": "article",\n        "source": "default",\n        "relationship": "article_detail"\n    }\n}\n')),(0,i.kt)("h3",{id:"metadata-pg-drop-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"relationship"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the relationship that needs to be dropped")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"cascade"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,i.kt)("td",{parentName:"tr",align:null},"When set to ",(0,i.kt)("inlineCode",{parentName:"td"},"true"),", all the dependent items on this relationship are also dropped")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Be careful when using ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade"),". First, try running the request without\n",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," set to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."))),(0,i.kt)("h2",{id:"metadata-pg-set-relationship-comment"},"pg_set_relationship_comment"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"pg_set_relationship_comment")," is used to set/update the comment on a\nrelationship. Setting the comment to ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," removes it."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_set_relationship_comment",\n    "args": {\n        "table": "article",\n        "source": "default",\n        "name": "article_detail",\n        "comment" : "has extra information about an article like count etc."\n    }\n}\n')),(0,i.kt)("h3",{id:"metadata-pg-set-relationship-comment-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"relationship"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"The relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"Text"),(0,i.kt)("td",{parentName:"tr",align:null},"Comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"metadata-pg-rename-relationship"},"pg_rename_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"pg_rename_relationship")," is used to modify the name of an existing relationship."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "pg_rename_relationship",\n    "args": {\n        "table": "article",\n        "name": "article_details",\n        "source": "default",\n        "new_name": "article_detail"\n    }\n}\n')),(0,i.kt)("h3",{id:"metadata-pg-rename-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"The relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"new_name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"New relationship name")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"mssql-create-object-relationship"},"mssql_create_object_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"create_object_relationship")," is used to create an object relationship on\na table. There cannot be an existing column or relationship with the\nsame name."),(0,i.kt)("p",null,"There are 3 ways in which you can create an object relationship."),(0,i.kt)("h3",{id:"1-using-foreign-key-constraint-on-a-column-2"},"1. Using foreign key constraint on a column"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"object relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_create_object_relationship",\n    "args": {\n        "table": "article",\n        "name": "author",\n        "source": "default",\n        "using": {\n            "foreign_key_constraint_on" : ["author_id"]\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In the case that the key uses only a single column it is permissible to\ngive just a string instead of a list, i.e.:\n",(0,i.kt)("inlineCode",{parentName:"p"},'"foreign_key_constraint_on" : "author_id"'),"."))),(0,i.kt)("h3",{id:"2-using-foreign-key-constraint-on-a-remote-table-1"},"2. Using foreign key constraint on a remote table"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"object relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"details")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_details")," ",(0,i.kt)("em",{parentName:"p"},"table"),"'s\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," ",(0,i.kt)("em",{parentName:"p"},"column"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "create_object_relationship",\n    "args": {\n        "table": "author",\n        "name": "details",\n        "using": {\n            "foreign_key_constraint_on" : {\n                "table": "author_details",\n                "columns": ["author_id"]\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Deprecation")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For compatibility with previous versions we also support the form of\n",(0,i.kt)("inlineCode",{parentName:"p"},"foreign_key_constraint_on")," with a ",(0,i.kt)("inlineCode",{parentName:"p"},"column"),"-field, e.g.:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "foreign_key_constraint_on" : {\n      "table": "author_details",\n      "column": "author_id"\n  }\n}\n')),(0,i.kt)("p",{parentName:"div"},"This form is deprecated in favor of the more general ",(0,i.kt)("inlineCode",{parentName:"p"},"columns")," field."))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Supported from")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Relationships via remote table are supported for versions\n",(0,i.kt)("inlineCode",{parentName:"p"},"v2.0.0-alpha.3")," and above."))),(0,i.kt)("h3",{id:"mssql-manual-obj-relationship"},"3. Manual configuration"),(0,i.kt)("p",null,"This is an advanced feature which is mostly used to define relationships\non or to views. We cannot rely on foreign key constraints as they are\nnot valid to or from views. So, when using manual configuration, we have\nto specify the remote table and how columns in this table are mapped to\nthe columns of the remote table."),(0,i.kt)("p",null,"Let's say we have a view called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," which has three columns\n",(0,i.kt)("inlineCode",{parentName:"p"},"article_id")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"view_count")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"average_rating"),". We can now define an\nobject relationship called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," on the ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," table as\nfollows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_create_object_relationship",\n    "args": {\n        "table": "article",\n        "name": "article_detail",\n        "source": "default",\n        "using": {\n            "manual_configuration" : {\n                "remote_table" : "article_detail",\n                "column_mapping" : {\n                    "id" : "article_id"\n                }\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is easy to make mistakes while using ",(0,i.kt)("inlineCode",{parentName:"p"},"manual_configuration"),". One\nsimple check is to ensure that foreign key constraint semantics are\nvalid on the columns being used in ",(0,i.kt)("inlineCode",{parentName:"p"},"column_mapping"),". In the previous\nexample, if it was allowed, a foreign key constraint could have been\ndefined on ",(0,i.kt)("inlineCode",{parentName:"p"},"article")," table's ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," column to ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," view's\n",(0,i.kt)("inlineCode",{parentName:"p"},"article_id")," column."))),(0,i.kt)("h3",{id:"mssql-create-object-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the new relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"using"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#objrelusing"},"ObjRelUsing")),(0,i.kt)("td",{parentName:"tr",align:null},"Use one of the available ways to define an object relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"text"),(0,i.kt)("td",{parentName:"tr",align:null},"comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"mssql-create-array-relationship"},"mssql_create_array_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"create_array_relationship")," is used to create an array relationship on a\ntable. There cannot be an existing column or relationship with the same\nname."),(0,i.kt)("p",null,"There are 2 ways in which you can create an array relationship."),(0,i.kt)("h3",{id:"1-using-foreign-key-constraint-on-a-column-3"},"1. Using foreign key constraint on a column"),(0,i.kt)("p",null,"Create an ",(0,i.kt)("inlineCode",{parentName:"p"},"array relationship")," ",(0,i.kt)("inlineCode",{parentName:"p"},"articles")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," ",(0,i.kt)("em",{parentName:"p"},"table"),", ",(0,i.kt)("em",{parentName:"p"},"using"),"\nthe ",(0,i.kt)("em",{parentName:"p"},"foreign_key_constraint_on")," the ",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column of the ",(0,i.kt)("inlineCode",{parentName:"p"},"article"),"\ntable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_create_array_relationship",\n    "args": {\n        "table": "author",\n        "name": "articles",\n        "source": "default",\n        "using": {\n            "foreign_key_constraint_on" : {\n                "table" : "article",\n                "columns" : ["author_id"]\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Deprecation")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"For compatibility with previous version we also support the form of\n",(0,i.kt)("inlineCode",{parentName:"p"},"foreign_key_constraint_on")," with a ",(0,i.kt)("inlineCode",{parentName:"p"},"column"),"-field, e.g.:"),(0,i.kt)("pre",{parentName:"div"},(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "foreign_key_constraint_on" : {\n     "table": "author_details",\n     "column": "author_id"\n }\n}\n')),(0,i.kt)("p",{parentName:"div"},"This form is deprecated in favor of the more general ",(0,i.kt)("inlineCode",{parentName:"p"},"columns")," field."))),(0,i.kt)("h3",{id:"2-manual-configuration-1"},"2. Manual configuration"),(0,i.kt)("p",null,"This is an advanced feature which is mostly used to define relationships\non or to views. We cannot rely on foreign key constraints as they are\nnot valid to or from views. So, when using manual configuration, we have\nto specify the remote table and how columns in this table are mapped to\nthe columns of the remote table."),(0,i.kt)("p",null,"Let's say we have a view called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," which has four columns\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"article_id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"view_count")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"average_rating"),". We can now\ndefine an array relationship called ",(0,i.kt)("inlineCode",{parentName:"p"},"article_details")," on the ",(0,i.kt)("inlineCode",{parentName:"p"},"author"),"\ntable as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_create_array_relationship",\n    "args": {\n        "table": "author",\n        "name": "article_details",\n        "source": "default",\n        "using": {\n            "manual_configuration" : {\n                "remote_table" : "article_detail",\n                "column_mapping" : {\n                    "id" : "author_id"\n                }\n            }\n        }\n    }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"It is easy to make mistakes while using ",(0,i.kt)("inlineCode",{parentName:"p"},"manual_configuration"),". One\nsimple check is to ensure that foreign key constraint semantics are\nvalid on the columns being used in ",(0,i.kt)("inlineCode",{parentName:"p"},"column_mapping"),". In the previous\nexample, if it was allowed, a foreign key constraint could have been\ndefined on the ",(0,i.kt)("inlineCode",{parentName:"p"},"author")," table's ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," column to ",(0,i.kt)("inlineCode",{parentName:"p"},"article_detail")," view's\n",(0,i.kt)("inlineCode",{parentName:"p"},"author_id")," column."))),(0,i.kt)("h3",{id:"mssql-create-array-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the new relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"using"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#arrrelusing"},"ArrRelUsing")),(0,i.kt)("td",{parentName:"tr",align:null},"Use one of the available ways to define an array relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"text"),(0,i.kt)("td",{parentName:"tr",align:null},"comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"mssql-drop-relationship"},"mssql_drop_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mssql_drop_relationship")," is used to drop a relationship (both object\nand array) on a table. If there are other objects dependent on this\nrelationship like permissions and query templates, etc., the request\nwill fail and report the dependencies unless ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),".\nIf ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", the dependent objects are also dropped."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_drop_relationship",\n    "args": {\n        "table": "article",\n        "source": "default",\n        "relationship": "article_detail"\n    }\n}\n')),(0,i.kt)("h3",{id:"mssql-drop-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"relationship"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the relationship that needs to be dropped")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"cascade"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,i.kt)("td",{parentName:"tr",align:null},"When set to ",(0,i.kt)("inlineCode",{parentName:"td"},"true"),", all the dependent items on this relationship are also dropped")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Be careful when using ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade"),". First, try running the request without\n",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"cascade")," set to ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."))),(0,i.kt)("h2",{id:"mssql-set-relationship-comment"},"mssql_set_relationship_comment"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mssql_set_relationship_comment")," is used to set/update the comment on a\nrelationship. Setting the comment to ",(0,i.kt)("inlineCode",{parentName:"p"},"null")," removes it."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_set_relationship_comment",\n    "args": {\n        "table": "article",\n        "source": "default",\n        "name": "article_detail",\n        "comment" : "has extra information about an article like count etc."\n    }\n}\n')),(0,i.kt)("h3",{id:"mssql-set-relationship-comment-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"relationship"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"The relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"comment"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},"Text"),(0,i.kt)("td",{parentName:"tr",align:null},"Comment")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))),(0,i.kt)("h2",{id:"mssql-rename-relationship"},"mssql_rename_relationship"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mssql_rename_relationship")," is used to modify the name of an existing relationship."),(0,i.kt)("p",null,"An example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /v1/metadata HTTP/1.1\nContent-Type: application/json\nX-Hasura-Role: admin\n\n{\n    "type": "mssql_rename_relationship",\n    "args": {\n        "table": "article",\n        "name": "article_details",\n        "source": "default",\n        "new_name": "article_detail"\n    }\n}\n')),(0,i.kt)("h3",{id:"mssql-rename-relationship-syntax"},"Args syntax"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Required"),(0,i.kt)("th",{parentName:"tr",align:null},"Schema"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"table"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#tablename"},"TableName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the table")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"The relationship")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"new_name"),(0,i.kt)("td",{parentName:"tr",align:null},"true"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#relationshipname"},"RelationshipName")),(0,i.kt)("td",{parentName:"tr",align:null},"New relationship name")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"source"),(0,i.kt)("td",{parentName:"tr",align:null},"false"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/docs/latest/graphql/core/api-reference/syntax-defs#sourcename"},"SourceName")),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the source database of the table (default: ",(0,i.kt)("inlineCode",{parentName:"td"},"default"),")")))))}u.isMDXComponent=!0}}]);