"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7175],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(h,o(o({ref:t},u),{},{components:n})):r.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},15556:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var r=n(83117),a=n(80102),i=(n(67294),n(3905)),o=["components"],s={description:"Hasura Cloud multiple admin secrets",keywords:["hasura","docs","cloud","security","allow","rotating","multiple","admin","secrets"],sidebar_position:4},l="Multiple Admin Secrets",c={unversionedId:"graphql/cloud/security/multiple-admin-secrets",id:"graphql/cloud/security/multiple-admin-secrets",title:"Multiple Admin Secrets",description:"Hasura Cloud multiple admin secrets",source:"@site/docs/graphql/cloud/security/multiple-admin-secrets.mdx",sourceDirName:"graphql/cloud/security",slug:"/graphql/cloud/security/multiple-admin-secrets",permalink:"/graphql-engine/latest/graphql/cloud/security/multiple-admin-secrets",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/cloud/security/multiple-admin-secrets.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{description:"Hasura Cloud multiple admin secrets",keywords:["hasura","docs","cloud","security","allow","rotating","multiple","admin","secrets"],sidebar_position:4},sidebar:"cloudDocsSidebar",previous:{title:"Disable GraphQL introspection",permalink:"/graphql-engine/latest/graphql/cloud/security/disable-graphql-introspection"},next:{title:"Multiple JWT Secrets",permalink:"/graphql-engine/latest/graphql/cloud/security/multiple-jwt-secrets"}},u={},d=[{value:"Introduction",id:"introduction",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"Rotating admin secrets (Self-hosted environments)",id:"rotating-admin-secrets-self-hosted-environments",level:2}],p={toc:d};function m(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"multiple-admin-secrets"},"Multiple Admin Secrets"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"You can specify a list of admin secrets in GraphQL Engine which can be used to :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Implement security mechanisms like rotating secrets"),(0,i.kt)("li",{parentName:"ol"},"Have different lifecycles for individual admin secrets e.g. temporarily give admin access to an operator")),(0,i.kt)("h2",{id:"how-to-use"},"How to use"),(0,i.kt)("p",null,"Multiple admin secrets can be provided in the env var ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_ADMIN_SECRETS")," which takes a list of admin secrets,"),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'["secret-1", "secret-2"]\n')),(0,i.kt)("p",null,"When you launch the console from the Hasura Cloud dashboard, you can use any secret from the admin secrets list to authenticate yourself as an admin.\nIf you want to make API calls as an admin from outside the console, you need to pass any one of the admin secrets as the ",(0,i.kt)("inlineCode",{parentName:"p"},"x-hasura-admin-secret")," request header."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If both ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_ADMIN_SECRET")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_ADMIN_SECRETS")," are set, then only ",(0,i.kt)("inlineCode",{parentName:"p"},"HASURA_GRAPHQL_ADMIN_SECRETS")," will be used."))),(0,i.kt)("h2",{id:"rotating-admin-secrets-self-hosted-environments"},"Rotating admin secrets (Self-hosted environments)"),(0,i.kt)("p",null,"When you have a self-hosted Hasura EE setup, you can use this feature to implement a secret rotation mechanism without downtime as outlined below:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Add a new secret to the list of admin secrets (and perform a rolling deploy)"),(0,i.kt)("li",{parentName:"ol"},"Update applications/services using the old admin secret to use the new secret"),(0,i.kt)("li",{parentName:"ol"},"Remove the old secret from the admin secret list (and perform a rolling deploy)")),(0,i.kt)("p",null,"Note that a rolling deploy ensures that there is atleast one service which is active."))}m.isMDXComponent=!0}}]);