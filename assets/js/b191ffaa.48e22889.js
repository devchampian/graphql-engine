"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[997],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,h=c["".concat(l,".").concat(m)]||c[m]||u[m]||i;return n?a.createElement(h,s(s({ref:t},d),{},{components:n})):a.createElement(h,s({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},80525:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return u}});var a=n(83117),r=n(80102),i=(n(67294),n(3905)),s=["components"],o={sidebar_label:"RESTified GraphQL Endpoints",sidebar_position:6,description:"Hasura RESTified GraphQL API reference",keywords:["hasura","docs","REST API","API reference"]},l="RESTified GraphQL Endpoints API Reference",p={unversionedId:"graphql/core/api-reference/restified",id:"graphql/core/api-reference/restified",title:"RESTified GraphQL Endpoints API Reference",description:"Hasura RESTified GraphQL API reference",source:"@site/docs/graphql/core/api-reference/restified.mdx",sourceDirName:"graphql/core/api-reference",slug:"/graphql/core/api-reference/restified",permalink:"/graphql-engine/latest/graphql/core/api-reference/restified",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/api-reference/restified.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_label:"RESTified GraphQL Endpoints",sidebar_position:6,description:"Hasura RESTified GraphQL API reference",keywords:["hasura","docs","REST API","API reference"]},sidebar:"docsSidebar",previous:{title:"Manage Metadata",permalink:"/graphql-engine/latest/graphql/core/api-reference/schema-metadata-api/manage-metadata"},next:{title:"Version API",permalink:"/graphql-engine/latest/graphql/core/api-reference/version"}},d={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"API Spec",id:"api-spec",level:2},{value:"Request",id:"request",level:3},{value:"Sample requests",id:"sample-requests",level:4},{value:"Response",id:"response",level:3},{value:"OpenAPI 3 Specification",id:"openapi-3-specification",level:2},{value:"Sample request",id:"sample-request",level:3},{value:"Response",id:"response-1",level:3}],c={toc:u};function m(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"restified-graphql-endpoints-api-reference"},"RESTified GraphQL Endpoints API Reference"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"The RESTified GraphQL API allows for the use of a REST interface to\nsaved GraphQL queries and mutations."),(0,i.kt)("p",null,"Users specify the query or mutation they wish to make available, as well\na URL template. Segments of the URL template can potentially capture\ndata to be used as GraphQL variables."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/api-reference/metadata-api/restified-endpoints"},"Metadata API Reference: RESTified GraphQL Endpoints")," for information on how to work\nwith endpoints through the metadata apis."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Supported from")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"RESTified endpoints are supported from versions ",(0,i.kt)("inlineCode",{parentName:"p"},"v2.0.0-alpha.1")," and\nabove."))),(0,i.kt)("h2",{id:"endpoint"},"Endpoint"),(0,i.kt)("p",null,"Requests are made to ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/rest/**")," endpoints."),(0,i.kt)("p",null,"By default these are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"GET"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"POST")," requests for queries, and"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"POST")," requests for mutations")),(0,i.kt)("p",null,"Although not in the REST spirit, ",(0,i.kt)("inlineCode",{parentName:"p"},"POST")," requests are allowed by default\nfor non-mutation queries since some HTTP clients may not be able to\nsupply a JSON body for GET requests."),(0,i.kt)("p",null,"If required, users may explicitly configure the HTTP methods allowed per\nendpoint."),(0,i.kt)("h2",{id:"api-spec"},"API Spec"),(0,i.kt)("h3",{id:"request"},"Request"),(0,i.kt)("p",null,"Endpoints are determined by the URL templates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Simple URLs such as ",(0,i.kt)("inlineCode",{parentName:"li"},"/s1/s2/s3")," match literally."),(0,i.kt)("li",{parentName:"ul"},"Segments starting with a ",(0,i.kt)("inlineCode",{parentName:"li"},":")," treat these parts of the path like\nwildcards and use the name to assign a variable. For example:\n",(0,i.kt)("inlineCode",{parentName:"li"},"/s1/:id/s3"),".")),(0,i.kt)("p",null,"The request expects a normal REST style request to the endpoint."),(0,i.kt)("p",null,"Variables can be supplied via route patterns, url query variables, and\nrequest body JSON object keys."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"JSON Body Object values are passed directly to the associated query\nwith no additional validation or type-coersion."),(0,i.kt)("li",{parentName:"ul"},"Route variables and Query parameters are interpreted as scalars\naccording to the variables types in the associated query and passed\nas JSON data through the query variables:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Missing nullable variables are interpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"NULL")),(0,i.kt)("li",{parentName:"ul"},"Boolean variables are interpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"Boolean")),(0,i.kt)("li",{parentName:"ul"},"Boolean flags without values e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"/api/rest/myquery?mybool")," are\ninterpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"true")),(0,i.kt)("li",{parentName:"ul"},"String variables are interpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"String")),(0,i.kt)("li",{parentName:"ul"},"UUID variables are interpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"String")),(0,i.kt)("li",{parentName:"ul"},"ID variables are interpreted as ",(0,i.kt)("inlineCode",{parentName:"li"},"String")),(0,i.kt)("li",{parentName:"ul"},"Number, Int, Float, and Double variables are interpreted as\n",(0,i.kt)("inlineCode",{parentName:"li"},"Number")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"All other types or mismatches currently report variable type\nerrors"))))),(0,i.kt)("p",null,"When making a request to this API only one endpoint should match. If\nmultiple endpoints match your request this is considered an error and\nwill report so via a 500 status code. If endpoints exist with your path,\nbut none matching your HTTP method then a 405 error will be returned\nlisting the methods that you can use."),(0,i.kt)("h4",{id:"sample-requests"},"Sample requests"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},"GET /api/rest/simple_query/1 HTTP/1.1\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},'POST /api/rest/complicated_mutation/2?time=now HTTP/1.1\nContent-Type: application/json\n\n{\n     "user": {"name": "Simon"}\n}\n')),(0,i.kt)("h3",{id:"response"},"Response"),(0,i.kt)("p",null,"The response is determined by the saved query. The response will be the\nsame as if you had made the query directly in the GraphQL console."),(0,i.kt)("p",null,"See the ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/api-reference/graphql-api/index"},"GraphQL API Reference")," for more details."),(0,i.kt)("h2",{id:"openapi-3-specification"},"OpenAPI 3 Specification"),(0,i.kt)("p",null,"The OpenAPI 3 specification of the REST endpoints are exposed at\n",(0,i.kt)("inlineCode",{parentName:"p"},"/api/swagger/json")," for admin role only:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},"GET /api/swagger/json HTTP/1.1\nX-Hasura-Role: admin\n")),(0,i.kt)("p",null,"The response JSON will be a OpenAPI 3 specification (OAS 3.0) for all\nthe RESTified GraphQL Endpoints for admin roles. For more details about\nOAS 3.0, ",(0,i.kt)("a",{parentName:"p",href:"https://swagger.io/specification/"},"click here"),"."),(0,i.kt)("h3",{id:"sample-request"},"Sample request"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-http"},"GET /api/swagger/json HTTP/1.1\nX-Hasura-Role: admin\n")),(0,i.kt)("h3",{id:"response-1"},"Response"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "openapi": "3.0.0",\n  "info": {\n      "version": "",\n      "title": "Rest Endpoints",\n      "description": "These OpenAPI specifications are automatically generated by Hasura."\n  },\n  "paths": {\n      "/api/rest/users": {\n          "get": {\n              "summary": "Fetch user data",\n              "description": "This API fetches user data (first name and last name) from the users table.\\n***\\nThe GraphQl query for this endpoint is:\\n```graphql\\nquery MyQuery{\\n  users {\\n    first_name\\n    last_name\\n  }\\n}\\n```",\n              "responses": {}\n          },\n          "parameters": [\n              {\n                  "schema": {\n                      "type": "string"\n                  },\n                  "in": "header",\n                  "name": "x-hasura-admin-secret",\n                  "description": "Your x-hasura-admin-secret will be used for authentication of the API request."\n              }\n          ]\n      }\n  },\n  "components": {}\n}\n')))}m.isMDXComponent=!0}}]);