"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8621],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(h,o(o({ref:t},p),{},{components:n})):a.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},93920:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(67294),r="tableOfContentsInline_ifKN",i=n(31498);function o(e){var t=e.toc,n=e.minHeadingLevel,o=e.maxHeadingLevel,l=e.filterTOC;return a.createElement("div",{className:r},a.createElement(i.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:o,className:"table-of-contents",linkClassName:null,filterTOC:l}))}},31498:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(83117),r=n(80102),i=n(67294),o=n(89575),l=["toc","className","linkClassName","linkActiveClassName","minHeadingLevel","maxHeadingLevel"];function c(e){var t=e.toc,n=e.className,a=e.linkClassName,r=e.isChild;return t.length?i.createElement("ul",{className:r?void 0:n},t.map((function(e){return i.createElement("li",{key:e.id},i.createElement("a",{href:"#"+e.id,className:null!=a?a:void 0,dangerouslySetInnerHTML:{__html:e.value}}),i.createElement(c,{isChild:!0,toc:e.children,className:n,linkClassName:a}))}))):null}function s(e){var t=e.toc,n=e.className,s=void 0===n?"table-of-contents table-of-contents__left-border":n,p=e.linkClassName,u=void 0===p?"table-of-contents__link":p,d=e.linkActiveClassName,m=void 0===d?void 0:d,h=e.minHeadingLevel,f=e.maxHeadingLevel,v=(0,r.Z)(e,l),k=(0,o.LU)(),g=null!=h?h:k.tableOfContents.minHeadingLevel,N=null!=f?f:k.tableOfContents.maxHeadingLevel,b=(0,o.b9)({toc:t,minHeadingLevel:g,maxHeadingLevel:N});"function"==typeof v.filterTOC&&(b=v.filterTOC(b));var y=(0,i.useMemo)((function(){if(u&&m)return{linkClassName:u,linkActiveClassName:m,minHeadingLevel:g,maxHeadingLevel:N}}),[u,m,g,N]);return(0,o.Si)(y),i.createElement(c,(0,a.Z)({toc:b,className:s,linkClassName:u},v))}},90554:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return d}});var a=n(83117),r=n(80102),i=(n(67294),n(3905)),o=n(93920),l=["components"],c={description:"Hasura Cloud API reference",keywords:["hasura","cloud","docs","API","API reference"],sidebar_position:15},s="API Reference",p={unversionedId:"graphql/cloud/api-reference",id:"graphql/cloud/api-reference",title:"API Reference",description:"Hasura Cloud API reference",source:"@site/docs/graphql/cloud/api-reference.mdx",sourceDirName:"graphql/cloud",slug:"/graphql/cloud/api-reference",permalink:"/graphql-engine/latest/graphql/cloud/api-reference",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/cloud/api-reference.mdx",tags:[],version:"current",sidebarPosition:15,frontMatter:{description:"Hasura Cloud API reference",keywords:["hasura","cloud","docs","API","API reference"],sidebar_position:15},sidebar:"cloudDocsSidebar",previous:{title:"Hasura Pro CLI",permalink:"/graphql-engine/latest/graphql/cloud/hasurapro-cli/index"},next:{title:"Glossary",permalink:"/graphql-engine/latest/graphql/cloud/glossary"}},u={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"Authentication",id:"authentication",level:2},{value:"APIs",id:"apis",level:2},{value:"Create a Project",id:"create-a-project",level:3},{value:"Get Project tenant id",id:"get-project-tenant-id",level:3},{value:"Get Tenant details",id:"get-tenant-details",level:3},{value:"Delete a Tenant",id:"delete-a-tenant",level:3},{value:"Get ENV Vars",id:"get-env-vars",level:3},{value:"Update ENV Vars",id:"update-env-vars",level:3},{value:"Create GitHub Preview App",id:"api-ref-create-preview-app",level:3}],m={toc:d};function h(e){var t=e.components,n=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"api-reference"},"API Reference"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"Hasura Cloud provides a GraphQL API to interact with the services to create and manage your projects."),(0,i.kt)("p",null,"You can use any GraphQL client and use the API with the right authentication header."),(0,i.kt)("h2",{id:"endpoint"},"Endpoint"),(0,i.kt)("p",null,"API endpoint is ",(0,i.kt)("inlineCode",{parentName:"p"},"https://data.pro.hasura.io/v1/graphql"),"."),(0,i.kt)("h2",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,'Authentication is done using a Personal Access Token that you can create from the Hasura Cloud Dashboard. You can find this option in the "My Account" section on bottom left.'),(0,i.kt)("p",null,"Once you have the token it can be used with the header: ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization: pat <token>"),"."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This token can be used to authenticate against Hasura Cloud APIs and your Hasura Cloud projects. Make sure you keep it secure. The token will be valid until you delete it from the dashboard."))),(0,i.kt)("h2",{id:"apis"},"APIs"),(0,i.kt)("p",null,'Each Hasura Cloud project is backed by an API entity called "Tenant", with a distinct "Tenant ID" which is different from "Project ID". Each Project is associated with a Tenant. In some cases, like Metrics API, the Project ID is used instead of Tenant ID.'),(0,i.kt)("p",null,"List of some useful APIs:"),(0,i.kt)(o.Z,{toc:d,filterTOC:function(e){return e[3].children},mdxType:"TOCInline"}),(0,i.kt)("h3",{id:"create-a-project"},"Create a Project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation createProject {\n  createTenant(\n    cloud: "aws"\n    region: "us-east-2"\n    envs: [{\n      key: "HASURA_GRAPHQL_CORS_DOMAIN",\n      value: "*"\n    }, {\n      key: "MY_ENV_VAR_1",\n      value: "my value 1"\n    }]\n  ) {\n    id\n    name\n  }\n}\n')),(0,i.kt)("h3",{id:"get-project-tenant-id"},"Get Project tenant id"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'query getProjectTenantId {\n  projects_by_pk(id: "7a79cf94-0e53-4520-a560-1b02bf522f08") {\n    id\n    tenant {\n      id\n    }\n  }\n}\n')),(0,i.kt)("h3",{id:"get-tenant-details"},"Get Tenant details"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'query getTenantDetails {\n  tenant_by_pk(id: "7a79cf94-0e53-4520-a560-1b02bf522f08") {\n    id\n    slug\n    project {\n      id\n      endpoint\n    }\n  }\n}\n')),(0,i.kt)("h3",{id:"delete-a-tenant"},"Delete a Tenant"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation deleteTenant {\n  deleteTenant(tenantId: "7a79cf94-0e53-4520-a560-1b02bf522f08") {\n    status\n  }\n}\n')),(0,i.kt)("h3",{id:"get-env-vars"},"Get ENV Vars"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'query getTenantENV {\n  getTenantEnv(tenantId: "7a79cf94-0e53-4520-a560-1b02bf522f08") {\n    hash\n    envVars\n  }\n}\n')),(0,i.kt)("h3",{id:"update-env-vars"},"Update ENV Vars"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation updateTenantEnv {\n  updateTenantEnv(\n    tenantId: "7a79cf94-0e53-4520-a560-1b02bf522f08"\n    currentHash: "6902a395d70072fbf8d36288f0eacc36c9d82e68"\n    envs: [\n      { key: "HASURA_GRAPHQL_ENABLE_CONSOLE", value: "true" },\n      {\n        key: "ACTIONS_ENDPOINT",\n        value: "https://my-actions-endpoint.com/actions"\n      }\n    ]\n  ) {\n    hash\n    envVars\n  }\n}\n')),(0,i.kt)("h3",{id:"api-ref-create-preview-app"},"Create GitHub Preview App"),(0,i.kt)("p",null,"Schedules the creation of a Hasura Cloud project with metadata and migrations from a branch of a GitHub repo."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-graphql"},'mutation createGitHubPreviewApp {\n  createGitHubPreviewApp(\n    payload: {\n      githubPersonalAccessToken: "<github_access_token>"\n      githubRepoDetails: {\n        branch: "main"\n        owner: "my-org"\n        repo: "my-repo",\n        directory: "backend/hasura"\n      },\n      projectOptions: {\n        cloud: "aws",\n        region: "us-east-2",\n        plan: "cloud_free",\n        name: "my-app_name"\n        envVars: [\n          { key: "HASURA_GRAPHQL_AUTH_HOOK", value: "https://my-webhook.com" },\n          { key: "MY_ENV_VAR_1", value: "my value 1" }\n        ]\n      }\n    }\n  ) {\n    githubPreviewAppJobID # job ID of the preview app creation job\n  }\n}\n')),(0,i.kt)("p",null,"The arguments mean the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"githubPersonalAccessToken"),": GitHub personal access token for Hasura Cloud to access the metadata and migrations from your repository"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"githubRepoDetails"),": GitHub configuration of this preview app:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"owner"),": The GitHub profile or the org that the repo with metadata/migrations belongs to"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"repo"),": Name of the GitHub repository that contains the metadata and migrations"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"branch"),": Name of the branch to deploy"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"directory"),": Path to the directory of the Hasura project (typically created by the Hasura CLI) in the repository"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"projectOptions"),": Configuration of the created preview app:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"name"),": Name of the preview app; can contain lowercase characters, numbers and hyphens"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cloud"),": The cloud provider to deploy the preview app on. Currently only ",(0,i.kt)("inlineCode",{parentName:"li"},"aws")," is supported"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"region"),": AWS Region to deploy the preview app on (refer to the Hasura Cloud dashboard to see the available regions)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"plan"),": The pricing tier of the created preview app. Set ",(0,i.kt)("inlineCode",{parentName:"li"},"cloud_free")," for free tier and ",(0,i.kt)("inlineCode",{parentName:"li"},"cloud_payg")," for standard tier"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"envVars"),": Env vars for the created preview app")))))}h.isMDXComponent=!0}}]);