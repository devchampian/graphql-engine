"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4834],{3905:function(e,t,r){r.d(t,{Zo:function(){return s},kt:function(){return m}});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},s=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=c(r),m=n,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return r?a.createElement(h,p(p({ref:t},s),{},{components:r})):a.createElement(h,p({ref:t},s))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,p=new Array(o);p[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,p[1]=i;for(var c=2;c<o;c++)p[c]=r[c];return a.createElement.apply(null,p)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},53546:function(e,t,r){r.r(t),r.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return u}});var a=r(83117),n=r(80102),o=(r(67294),r(3905)),p=["components"],i={description:"Moving existing project to a new project",keywords:["hasura","docs","project","move","transfer","downgrade","transfer region"],sidebar_position:17},l="Transfer existing Hasura Cloud project to a new project",c={unversionedId:"graphql/cloud/projects/move-project-manual",id:"graphql/cloud/projects/move-project-manual",title:"Transfer existing Hasura Cloud project to a new project",description:"Moving existing project to a new project",source:"@site/docs/graphql/cloud/projects/move-project-manual.mdx",sourceDirName:"graphql/cloud/projects",slug:"/graphql/cloud/projects/move-project-manual",permalink:"/graphql-engine/latest/graphql/cloud/projects/move-project-manual",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/cloud/projects/move-project-manual.mdx",tags:[],version:"current",sidebarPosition:17,frontMatter:{description:"Moving existing project to a new project",keywords:["hasura","docs","project","move","transfer","downgrade","transfer region"],sidebar_position:17},sidebar:"cloudDocsSidebar",previous:{title:"Updating v1.3 projects to v2.0",permalink:"/graphql-engine/latest/graphql/cloud/projects/move-project-v2"},next:{title:"Manually moving Hasura Cloud v1.3 projects to Hasura v2.0",permalink:"/graphql-engine/latest/graphql/cloud/projects/move-project-v2-manual"}},s={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Step 1: Export metadata from existing project",id:"step-1-export-metadata-from-existing-project",level:2},{value:"Step 2: Create a new Cloud project with the same configuration",id:"step-2-create-a-new-cloud-project-with-the-same-configuration",level:2},{value:"Step 3: Apply the exported metadata to the new project",id:"step-3-apply-the-exported-metadata-to-the-new-project",level:2},{value:"Step 4: Delete the earlier project",id:"step-4-delete-the-earlier-project",level:2},{value:"Optional steps",id:"optional-steps",level:2},{value:"Zero-downtime transfer",id:"zero-downtime-transfer",level:2},{value:"Caveats",id:"caveats",level:2}],d={toc:u};function m(e){var t=e.components,r=(0,n.Z)(e,p);return(0,o.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"transfer-existing-hasura-cloud-project-to-a-new-project"},"Transfer existing Hasura Cloud project to a new project"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"To transfer a project you will have to create a new Hasura project and\nconfigure it with the same Hasura metadata and other configuration as in\nthe previous project."),(0,o.kt)("p",null,"The following is a guide to achieve this."),(0,o.kt)("h2",{id:"step-1-export-metadata-from-existing-project"},"Step 1: Export metadata from existing project"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/migrations/manage-metadata"},"exporting metadata")," to get a copy of the\ncurrent Hasura metadata on your project."),(0,o.kt)("p",null,"Do ensure no further changes are made to the Hasura metadata post this."),(0,o.kt)("h2",{id:"step-2-create-a-new-cloud-project-with-the-same-configuration"},"Step 2: Create a new Cloud project with the same configuration"),(0,o.kt)("p",null,"See ",(0,o.kt)("inlineCode",{parentName:"p"},"Step 1")," of ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/create"},"creating projects")," to create a new\nHasura Cloud project."),(0,o.kt)("p",null,"After project creation, update the Hasura Cloud configuration of the new\nproject with the same configuration as the earlier project. i.e. add the\nsame ENV vars, custom domains, collaborators, billing, etc."),(0,o.kt)("h2",{id:"step-3-apply-the-exported-metadata-to-the-new-project"},"Step 3: Apply the exported metadata to the new project"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/migrations/manage-metadata"},"applying metadata")," to apply the earlier\nexported metadata to the new project."),(0,o.kt)("p",null,"The new project should now be generating the same GraphQL API as the\nearlier project."),(0,o.kt)("h2",{id:"step-4-delete-the-earlier-project"},"Step 4: Delete the earlier project"),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/delete"},"deleting projects")," to delete the earlier project."),(0,o.kt)("h2",{id:"optional-steps"},"Optional steps"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"If you are using Hasura migrations on your project, please mark all\nexisting migrations as applied on the new project using the\nfollowing Hasura CLI command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"hasura migrate apply --skip-execution --endpoint <new-project-endpoint> --admin-secret <new-project-admin-secret> --all-databases\n"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"You can ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/details#rename-project"},"rename")," your new project to the same name\nas the earlier project if you wish.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"If you haven't renamed your new project or set up a\n",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/domains"},"custom domain")," for your project, you might\nwant to update any clients consuming the GraphQL API to point to the\nnew project's GraphQL endpoint."))),(0,o.kt)("h2",{id:"zero-downtime-transfer"},"Zero-downtime transfer"),(0,o.kt)("p",null,"To achieve a zero-downtime transfer, you will need to have a\n",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/domains"},"custom domain")," attached to your Cloud project.\nOnce the new project is set up identically as the old one, you can\nupdate the DNS entries for your custom domain to the new project to have\na seamless transfer of traffic to the new project."),(0,o.kt)("p",null,"If you simply want to avoid updating your clients with the new project's\nAPI endpoint, you can simply ",(0,o.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/cloud/projects/details#rename-project"},"rename")," your new project\nwith the same name as the earlier project. This will cause a short\ndowntime of your API after you delete your old project until you rename\nthe new one."),(0,o.kt)("h2",{id:"caveats"},"Caveats"),(0,o.kt)("p",null,"You will lose the following data from your earlier project in the\nprocess:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"all existing scheduled events"),(0,o.kt)("li",{parentName:"ul"},"all existing async actions"),(0,o.kt)("li",{parentName:"ul"},"past invocation logs of cron triggers")),(0,o.kt)("p",null,"If you would like these to be transferred to the new project as well\nplease get in touch with support regarding this before deleting the old\nproject."))}m.isMDXComponent=!0}}]);