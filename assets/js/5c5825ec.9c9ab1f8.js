"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5598],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return c}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,u=m["".concat(s,".").concat(c)]||m[c]||h[c]||i;return a?n.createElement(u,l(l({ref:t},d),{},{components:a})):n.createElement(u,l({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},22790:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return c},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return h}});var n=a(83117),r=a(80102),i=(a(67294),a(3905)),l=["components"],o={description:"Manage relationships between Postgres tables/views in Hasura",keywords:["hasura","docs","postgres","schema","relationship"],slug:"index"},s="Postgres: Relationships between tables/views",p={unversionedId:"graphql/core/databases/postgres/schema/table-relationships/index",id:"graphql/core/databases/postgres/schema/table-relationships/index",title:"Postgres: Relationships between tables/views",description:"Manage relationships between Postgres tables/views in Hasura",source:"@site/docs/graphql/core/databases/postgres/schema/table-relationships/index.mdx",sourceDirName:"graphql/core/databases/postgres/schema/table-relationships",slug:"/graphql/core/databases/postgres/schema/table-relationships/index",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/schema/table-relationships/index",editUrl:"https://github.com/hasura/graphql-engine/edit/master/docs/docs/graphql/core/databases/postgres/schema/table-relationships/index.mdx",tags:[],version:"current",frontMatter:{description:"Manage relationships between Postgres tables/views in Hasura",keywords:["hasura","docs","postgres","schema","relationship"],slug:"index"},sidebar:"docsSidebar",previous:{title:"Tables basics",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/schema/tables"},next:{title:"Creating relationships",permalink:"/graphql-engine/latest/graphql/core/databases/postgres/schema/table-relationships/create"}},d={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Table relationships",id:"table-relationships",level:2},{value:"GraphQL schema relationships",id:"pg-graphql-relationships",level:2},{value:"Managing GraphQL relationships",id:"managing-graphql-relationships",level:2},{value:"Table relationships modelling guides",id:"table-relationships-modelling-guides",level:2}],m={toc:h};function c(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"postgres-relationships-between-tablesviews"},"Postgres: Relationships between tables/views"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"To make ",(0,i.kt)("a",{parentName:"p",href:"/graphql-engine/latest/graphql/core/databases/postgres/queries/nested-object-queries"},"nested object queries"),", the\ntables/views in your database need to be connected via relationships."),(0,i.kt)("p",null,"Let's say we have the following tables in our database: ",(0,i.kt)("inlineCode",{parentName:"p"},"authors"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"passport_infos"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"articles")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"tags"),"."),(0,i.kt)("h2",{id:"table-relationships"},"Table relationships"),(0,i.kt)("p",null,"The tables/views in any relational database are typically related to\neach other via one of the following types of table relationships:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Example"),(0,i.kt)("th",{parentName:"tr",align:null},"Meaning"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"one-to-one")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"owner")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"passport_infos")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null," an ",(0,i.kt)("inlineCode",{parentName:"td"},"owner")," can have one ",(0,i.kt)("inlineCode",{parentName:"td"},"passport_info")," "),(0,i.kt)("li",null," a ",(0,i.kt)("inlineCode",{parentName:"td"},"passport_info")," can have one ",(0,i.kt)("inlineCode",{parentName:"td"},"owner")," ")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"one-to-many")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"authors")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"articles")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null," an ",(0,i.kt)("inlineCode",{parentName:"td"},"author")," can have many ",(0,i.kt)("inlineCode",{parentName:"td"},"articles")," "),(0,i.kt)("li",null," an ",(0,i.kt)("inlineCode",{parentName:"td"},"article")," can have one ",(0,i.kt)("inlineCode",{parentName:"td"},"author")," ")))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"many-to-many")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"articles")," and ",(0,i.kt)("inlineCode",{parentName:"td"},"tags")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("ul",null,(0,i.kt)("li",null," an ",(0,i.kt)("inlineCode",{parentName:"td"},"article")," can have many ",(0,i.kt)("inlineCode",{parentName:"td"},"tags")," "),(0,i.kt)("li",null," a ",(0,i.kt)("inlineCode",{parentName:"td"},"tag")," can have many ",(0,i.kt)("inlineCode",{parentName:"td"},"articles")," ")))))),(0,i.kt)("h2",{id:"pg-graphql-relationships"},"GraphQL schema relationships"),(0,i.kt)("p",null,"Each table relationship, as you can see from the above section, will\nhave two component relationships (one in either direction) in the\nGraphQL schema. These relationships can be one of the following types:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Example"),(0,i.kt)("th",{parentName:"tr",align:null},"Meaning"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"object relationship")," (one-to-one)"),(0,i.kt)("td",{parentName:"tr",align:null},"an ",(0,i.kt)("inlineCode",{parentName:"td"},"article")," can have one ",(0,i.kt)("inlineCode",{parentName:"td"},"author")),(0,i.kt)("td",{parentName:"tr",align:null},"an ",(0,i.kt)("inlineCode",{parentName:"td"},"article")," object will have a single nested author object called ",(0,i.kt)("inlineCode",{parentName:"td"},"author"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"array relationship")," (one-to-many)"),(0,i.kt)("td",{parentName:"tr",align:null},"an ",(0,i.kt)("inlineCode",{parentName:"td"},"author")," can have many ",(0,i.kt)("inlineCode",{parentName:"td"},"articles")),(0,i.kt)("td",{parentName:"tr",align:null},"an ",(0,i.kt)("inlineCode",{parentName:"td"},"author")," object will have an array of nested article objects called ",(0,i.kt)("inlineCode",{parentName:"td"},"articles"))))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},'The relationship name is used to refer to the nested objects in queries.\nFor example, "',(0,i.kt)("inlineCode",{parentName:"p"},"articles"),'" of an ',(0,i.kt)("inlineCode",{parentName:"p"},"author"),' and "',(0,i.kt)("inlineCode",{parentName:"p"},"author"),'" of an ',(0,i.kt)("inlineCode",{parentName:"p"},"article"),"."))),(0,i.kt)("h2",{id:"managing-graphql-relationships"},"Managing GraphQL relationships"),(0,i.kt)("p",null,"See the following to manage the object/array relationships between\ntables/views for the GraphQL schema:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/databases/postgres/schema/table-relationships/create"},"Postgres: Creating relationships")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/databases/postgres/schema/table-relationships/rename"},"Postgres: Renaming relationships"))),(0,i.kt)("h2",{id:"table-relationships-modelling-guides"},"Table relationships modelling guides"),(0,i.kt)("p",null,"The following guides will help you model the different types of table\nrelationships in the database:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/guides/data-modelling/one-to-one"},"Modelling one-to-one table relationships")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/guides/data-modelling/one-to-many"},"Modelling one-to-many table relationships")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/graphql-engine/latest/graphql/core/guides/data-modelling/many-to-many"},"Modelling many-to-many table relationships"))))}c.isMDXComponent=!0}}]);